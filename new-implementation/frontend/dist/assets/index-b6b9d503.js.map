{"version":3,"mappings":"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","names":["f","require$$0","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","reactJsxRuntime_production_min","jsx","jsxs","jsxRuntimeModule","exports","client","createRoot","hydrateRoot","createStoreImpl","createState","state","listeners","Set","setState","partial","replace","nextState","is","previousState","assign","forEach","listener","getState","api","getInitialState","initialState","subscribe","add","delete","destroy","clear","React","objectIs","x","y","useState","useEffect","useLayoutEffect","useDebugValue","checkIfSnapshotChanged","inst","latestGetSnapshot","getSnapshot","value","nextValue","error","shim","window","document","createElement","_useState","forceUpdate","useSyncExternalStoreShim_production","useSyncExternalStore","shimModule","require$$1","useRef","useMemo","withSelector_production","useSyncExternalStoreWithSelector","getServerSnapshot","selector","isEqual","instRef","hasValue","memoizedSelector","nextSnapshot","hasMemo","memoizedSnapshot","currentSelection","memoizedSelection","nextSelection","maybeGetServerSnapshot","withSelectorModule","ReactExports","useSyncExternalStoreExports","identity","arg","createImpl","createStore","useBoundStore","equalityFn","slice","getServerState","useStore","create","API_BASE_URL","VITE_API_BASE_URL","API_TIMEOUT","parseInt","VITE_API_TIMEOUT","APP_NAME","VITE_APP_NAME","APP_VERSION","VITE_APP_VERSION","STORAGE_KEYS","HTTP_STATUS","ApiRequestError","Error","constructor","statusCode","data","message","super","this","name","storage","getItem","fallback","item","localStorage","JSON","parse","setItem","stringify","console","removeItem","hasItem","getAllKeys","keys","i","length","push","getAccessToken","setAccessToken","token","removeAccessToken","getRefreshToken","setRefreshToken","removeRefreshToken","getUser","setUser","user","removeUser","getTheme","setTheme","theme","isSidebarCollapsed","setSidebarCollapsed","collapsed","getLanguage","setLanguage","language","clearAuth","delay","ms","Promise","resolve","setTimeout","isMobile","innerWidth","apiClient","config","__publicField","baseURL","timeout","defaultHeaders","headers","getUrl","endpoint","startsWith","getHeaders","accessToken","handleResponse","response","contentType","get","includes","json","text","ok","status","handleError","location","href","details","TypeError","url","queryString","params","buildQueryString","fullUrl","fetchOptions","method","signal","AbortSignal","fetch","post","body","put","patch","query","URLSearchParams","entries","Array","isArray","v","append","String","toString","setDefaultHeaders","setBaseURL","http","fetchWithRetry","fn","shouldRetry","retry","retryCount","async","maxAttempts","delayMs","lastError","attempt","retryAsync","authService","login","email","password","request","setTokens","refreshToken","register","companyName","confirmPassword","logout","clearTokenRefreshTimeout","requestPasswordReset","resetPassword","verifyEmail","getCurrentUser","isAuthenticated","scheduleTokenRefresh","decoded","decodeToken","exp","expiryTime","timeUntilRefresh","Date","now","tokenRefreshTimeout","catch","parts","split","atob","clearTimeout","isTokenExpired","useAuthStore","set","loading","setError","clearError","hasRole","roles","rolesArray","some","role","hasPermission","permission","permissions","slug","initializeAuth","storedUser","ProtectedRoute","children","className","Navigate","to","RoleBasedRoute","requiredRoles","UserRole","useUIStore","sidebarCollapsed","documentElement","classList","remove","matchMedia","matches","mobileMenuOpen","setMobileMenuOpen","open","toastMessage","showToast","clearToast","dialogs","openDialog","dialogId","closeDialog","toggleDialog","breadcrumbs","setBreadcrumbs","initialize","useAuth","useCallback","Header","isAdmin","navigate","useNavigate","showUserMenu","setShowUserMenu","jsxRuntimeExports","onClick","Menu","title","Settings","charAt","toUpperCase","_a","ChevronDown","User","LogOut","Sidebar","useLocation","navItems","baseItems","id","label","path","icon","userRoles","map","r","allItems","CASHIER","MANAGER","ADMIN","getNavItems","iconMap","BarChart3","ShoppingCart","Package","Users","FileText","Home","ChevronRight","ChevronLeft","Link","pathname","Footer","currentYear","getFullYear","MainLayout","isMobileDevice","setIsMobileDevice","checkMobile","addEventListener","removeEventListener","Outlet","AuthLayout","AdminLayout","LoginPage","lazy","__vitePreload","import","RegisterPage","ForgotPasswordPage","DashboardPage","NotFoundPage","UnauthorizedPage","LoadingFallback","routes","element","Suspense","App","router","createBrowserRouter","initializeUI","RouterProvider","ReactDOM","getElementById","render","StrictMode"],"sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../node_modules/zustand/esm/vanilla.mjs","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js","../../node_modules/use-sync-external-store/shim/index.js","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js","../../node_modules/use-sync-external-store/shim/with-selector.js","../../node_modules/zustand/esm/index.mjs","../../src/utils/constants.ts","../../src/types/api.types.ts","../../src/services/storage.ts","../../src/utils/helpers.ts","../../src/services/api.ts","../../src/services/auth.service.ts","../../src/store/authStore.ts","../../src/routes/ProtectedRoute.tsx","../../src/routes/RoleBasedRoute.tsx","../../src/types/auth.types.ts","../../src/store/uiStore.ts","../../src/hooks/useAuth.ts","../../src/components/common/Header.tsx","../../src/components/common/Sidebar.tsx","../../src/components/common/Footer.tsx","../../src/components/layouts/MainLayout.tsx","../../src/components/layouts/AuthLayout.tsx","../../src/components/layouts/AdminLayout.tsx","../../src/routes/index.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.\"\n      );\n    }\n    listeners.clear();\n  };\n  const api = { setState, getState, getInitialState, subscribe, destroy };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = (createState) => createState ? createStoreImpl(createState) : createStoreImpl;\nvar vanilla = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'.\"\n    );\n  }\n  return createStore(createState);\n};\n\nexport { createStore, vanilla as default };\n","/**\n * @license React\n * use-sync-external-store-shim.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useState = React.useState,\n  useEffect = React.useEffect,\n  useLayoutEffect = React.useLayoutEffect,\n  useDebugValue = React.useDebugValue;\nfunction useSyncExternalStore$2(subscribe, getSnapshot) {\n  var value = getSnapshot(),\n    _useState = useState({ inst: { value: value, getSnapshot: getSnapshot } }),\n    inst = _useState[0].inst,\n    forceUpdate = _useState[1];\n  useLayoutEffect(\n    function () {\n      inst.value = value;\n      inst.getSnapshot = getSnapshot;\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n    },\n    [subscribe, value, getSnapshot]\n  );\n  useEffect(\n    function () {\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      return subscribe(function () {\n        checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      });\n    },\n    [subscribe]\n  );\n  useDebugValue(value);\n  return value;\n}\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  inst = inst.value;\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(inst, nextValue);\n  } catch (error) {\n    return !0;\n  }\n}\nfunction useSyncExternalStore$1(subscribe, getSnapshot) {\n  return getSnapshot();\n}\nvar shim =\n  \"undefined\" === typeof window ||\n  \"undefined\" === typeof window.document ||\n  \"undefined\" === typeof window.document.createElement\n    ? useSyncExternalStore$1\n    : useSyncExternalStore$2;\nexports.useSyncExternalStore =\n  void 0 !== React.useSyncExternalStore ? React.useSyncExternalStore : shim;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n","/**\n * @license React\n * use-sync-external-store-shim/with-selector.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\"),\n  shim = require(\"use-sync-external-store/shim\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useSyncExternalStore = shim.useSyncExternalStore,\n  useRef = React.useRef,\n  useEffect = React.useEffect,\n  useMemo = React.useMemo,\n  useDebugValue = React.useDebugValue;\nexports.useSyncExternalStoreWithSelector = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot,\n  selector,\n  isEqual\n) {\n  var instRef = useRef(null);\n  if (null === instRef.current) {\n    var inst = { hasValue: !1, value: null };\n    instRef.current = inst;\n  } else inst = instRef.current;\n  instRef = useMemo(\n    function () {\n      function memoizedSelector(nextSnapshot) {\n        if (!hasMemo) {\n          hasMemo = !0;\n          memoizedSnapshot = nextSnapshot;\n          nextSnapshot = selector(nextSnapshot);\n          if (void 0 !== isEqual && inst.hasValue) {\n            var currentSelection = inst.value;\n            if (isEqual(currentSelection, nextSnapshot))\n              return (memoizedSelection = currentSelection);\n          }\n          return (memoizedSelection = nextSnapshot);\n        }\n        currentSelection = memoizedSelection;\n        if (objectIs(memoizedSnapshot, nextSnapshot)) return currentSelection;\n        var nextSelection = selector(nextSnapshot);\n        if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\n          return (memoizedSnapshot = nextSnapshot), currentSelection;\n        memoizedSnapshot = nextSnapshot;\n        return (memoizedSelection = nextSelection);\n      }\n      var hasMemo = !1,\n        memoizedSnapshot,\n        memoizedSelection,\n        maybeGetServerSnapshot =\n          void 0 === getServerSnapshot ? null : getServerSnapshot;\n      return [\n        function () {\n          return memoizedSelector(getSnapshot());\n        },\n        null === maybeGetServerSnapshot\n          ? void 0\n          : function () {\n              return memoizedSelector(maybeGetServerSnapshot());\n            }\n      ];\n    },\n    [getSnapshot, getServerSnapshot, selector, isEqual]\n  );\n  var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\n  useEffect(\n    function () {\n      inst.hasValue = !0;\n      inst.value = value;\n    },\n    [value]\n  );\n  useDebugValue(value);\n  return value;\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}\n","import { createStore } from 'zustand/vanilla';\nexport * from 'zustand/vanilla';\nimport ReactExports from 'react';\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector.js';\n\nconst { useDebugValue } = ReactExports;\nconst { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports;\nlet didWarnAboutEqualityFn = false;\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity, equalityFn) {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && equalityFn && !didWarnAboutEqualityFn) {\n    console.warn(\n      \"[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937\"\n    );\n    didWarnAboutEqualityFn = true;\n  }\n  const slice = useSyncExternalStoreWithSelector(\n    api.subscribe,\n    api.getState,\n    api.getServerState || api.getInitialState,\n    selector,\n    equalityFn\n  );\n  useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && typeof createState !== \"function\") {\n    console.warn(\n      \"[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.\"\n    );\n  }\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\n  const useBoundStore = (selector, equalityFn) => useStore(api, selector, equalityFn);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = (createState) => createState ? createImpl(createState) : createImpl;\nvar react = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`.\"\n    );\n  }\n  return create(createState);\n};\n\nexport { create, react as default, useStore };\n","// API Configuration\nexport const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:3000/api';\nexport const API_TIMEOUT = parseInt(import.meta.env.VITE_API_TIMEOUT || '30000', 10);\nexport const API_RETRY_COUNT = parseInt(import.meta.env.VITE_API_RETRY_COUNT || '3', 10);\n\n// App Configuration\nexport const APP_NAME = import.meta.env.VITE_APP_NAME || 'POS System';\nexport const APP_VERSION = import.meta.env.VITE_APP_VERSION || '1.0.0';\nexport const APP_ENVIRONMENT = import.meta.env.MODE || 'development';\n\n// Storage Keys\nexport const STORAGE_KEYS = {\n  ACCESS_TOKEN: 'access_token',\n  REFRESH_TOKEN: 'refresh_token',\n  USER: 'user',\n  THEME: 'theme',\n  SIDEBAR_COLLAPSED: 'sidebar_collapsed',\n  LANGUAGE: 'language',\n} as const;\n\n// Token Configuration\nexport const TOKEN_EXPIRY_BUFFER = 5 * 60 * 1000; // 5 minutes in ms\nexport const TOKEN_REFRESH_INTERVAL = 10 * 60 * 1000; // 10 minutes in ms\n\n// Routes\nexport const PUBLIC_ROUTES = [\n  '/login',\n  '/register',\n  '/forgot-password',\n];\n\nexport const PROTECTED_ROUTES = {\n  DASHBOARD: '/dashboard',\n  SALES: '/dashboard/sales',\n  ORDERS: '/dashboard/orders',\n  PRODUCTS: '/dashboard/products',\n  CUSTOMERS: '/dashboard/customers',\n  INVENTORY: '/dashboard/inventory',\n  REPORTS: '/dashboard/reports',\n  ADMIN: '/admin',\n  SETTINGS: '/admin/settings',\n  USERS: '/admin/users',\n  AUDIT_LOG: '/admin/audit-log',\n};\n\n// Role-based Routes\nexport const ROLE_BASED_ROUTES = {\n  CASHIER: [\n    PROTECTED_ROUTES.DASHBOARD,\n    PROTECTED_ROUTES.SALES,\n    PROTECTED_ROUTES.CUSTOMERS,\n  ],\n  MANAGER: [\n    PROTECTED_ROUTES.DASHBOARD,\n    PROTECTED_ROUTES.SALES,\n    PROTECTED_ROUTES.PRODUCTS,\n    PROTECTED_ROUTES.CUSTOMERS,\n    PROTECTED_ROUTES.INVENTORY,\n    PROTECTED_ROUTES.REPORTS,\n  ],\n  ADMIN: Object.values(PROTECTED_ROUTES),\n};\n\n// Error Messages\nexport const ERROR_MESSAGES = {\n  INVALID_CREDENTIALS: 'Invalid email or password',\n  SESSION_EXPIRED: 'Your session has expired. Please login again.',\n  UNAUTHORIZED: 'You do not have permission to access this resource',\n  SERVER_ERROR: 'An error occurred. Please try again later.',\n  NETWORK_ERROR: 'Network error. Please check your connection.',\n  VALIDATION_ERROR: 'Please check your input and try again.',\n  TOKEN_REFRESH_FAILED: 'Failed to refresh session. Please login again.',\n} as const;\n\n// Success Messages\nexport const SUCCESS_MESSAGES = {\n  LOGIN_SUCCESS: 'Logged in successfully',\n  LOGOUT_SUCCESS: 'Logged out successfully',\n  REGISTER_SUCCESS: 'Account created successfully',\n  OPERATION_SUCCESS: 'Operation completed successfully',\n} as const;\n\n// HTTP Status Codes\nexport const HTTP_STATUS = {\n  OK: 200,\n  CREATED: 201,\n  BAD_REQUEST: 400,\n  UNAUTHORIZED: 401,\n  FORBIDDEN: 403,\n  NOT_FOUND: 404,\n  UNPROCESSABLE_ENTITY: 422,\n  TOO_MANY_REQUESTS: 429,\n  INTERNAL_SERVER_ERROR: 500,\n  SERVICE_UNAVAILABLE: 503,\n} as const;\n\n// Pagination\nexport const PAGINATION = {\n  DEFAULT_PAGE: 1,\n  DEFAULT_PAGE_SIZE: 20,\n  MAX_PAGE_SIZE: 100,\n  PAGE_SIZES: [10, 20, 50, 100],\n} as const;\n\n// Debounce and Throttle\nexport const DEBOUNCE_DELAY = 300; // ms\nexport const THROTTLE_DELAY = 500; // ms\n\n// Toast Messages Duration\nexport const TOAST_DURATION = {\n  SUCCESS: 3000,\n  ERROR: 5000,\n  INFO: 3000,\n  WARNING: 4000,\n} as const;\n\n// Breakpoints (Tailwind)\nexport const BREAKPOINTS = {\n  SM: 640,\n  MD: 768,\n  LG: 1024,\n  XL: 1280,\n  '2XL': 1536,\n} as const;\n\n// Date Format\nexport const DATE_FORMAT = 'MM/dd/yyyy';\nexport const DATETIME_FORMAT = 'MM/dd/yyyy HH:mm:ss';\nexport const TIME_FORMAT = 'HH:mm:ss';\n\n// Regular Expressions\nexport const REGEX = {\n  EMAIL: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/,\n  PHONE: /^(\\+\\d{1,3}[- ]?)?\\d{10,}$/,\n  URL: /^https?:\\/\\/.+/i,\n  STRONG_PASSWORD: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$/,\n} as const;\n","export interface ApiResponse<T = any> {\n  data: T;\n  message: string;\n  statusCode: number;\n  success: boolean;\n  timestamp?: string;\n}\n\nexport interface ApiError {\n  message: string;\n  statusCode: number;\n  details?: Record<string, any>;\n  timestamp?: string;\n}\n\nexport interface PaginatedResponse<T> {\n  data: T[];\n  page: number;\n  pageSize: number;\n  total: number;\n  totalPages: number;\n  hasNextPage: boolean;\n  hasPreviousPage: boolean;\n}\n\nexport interface ListParams {\n  page?: number;\n  pageSize?: number;\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n  search?: string;\n  filter?: Record<string, any>;\n}\n\nexport interface RequestConfig {\n  headers?: Record<string, string>;\n  params?: Record<string, any>;\n  timeout?: number;\n  retry?: boolean;\n  retryCount?: number;\n}\n\nexport interface HttpClientConfig {\n  baseURL: string;\n  timeout: number;\n  headers?: Record<string, string>;\n  withCredentials?: boolean;\n}\n\nexport class ApiRequestError extends Error {\n  constructor(\n    public statusCode: number,\n    public data?: any,\n    message?: string\n  ) {\n    super(message || `API Error: ${statusCode}`);\n    this.name = 'ApiRequestError';\n  }\n}\n","import { STORAGE_KEYS } from '@/utils/constants';\n\n/**\n * Storage service - Wrapper around localStorage with typed methods\n */\nclass StorageService {\n  /**\n   * Get item from localStorage\n   */\n  getItem<T = string>(key: string, fallback?: T): T | null {\n    try {\n      const item = localStorage.getItem(key);\n      if (item === null) return fallback ?? null;\n      return JSON.parse(item) as T;\n    } catch {\n      return fallback ?? null;\n    }\n  }\n\n  /**\n   * Set item in localStorage\n   */\n  setItem<T>(key: string, value: T): void {\n    try {\n      localStorage.setItem(key, JSON.stringify(value));\n    } catch (error) {\n      console.error(`Failed to set item ${key}:`, error);\n    }\n  }\n\n  /**\n   * Remove item from localStorage\n   */\n  removeItem(key: string): void {\n    try {\n      localStorage.removeItem(key);\n    } catch (error) {\n      console.error(`Failed to remove item ${key}:`, error);\n    }\n  }\n\n  /**\n   * Clear all items from localStorage\n   */\n  clear(): void {\n    try {\n      localStorage.clear();\n    } catch (error) {\n      console.error('Failed to clear storage:', error);\n    }\n  }\n\n  /**\n   * Check if key exists in localStorage\n   */\n  hasItem(key: string): boolean {\n    return localStorage.getItem(key) !== null;\n  }\n\n  /**\n   * Get all keys from localStorage\n   */\n  getAllKeys(): string[] {\n    const keys: string[] = [];\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (key) keys.push(key);\n    }\n    return keys;\n  }\n\n  // Token methods\n  getAccessToken(): string | null {\n    return this.getItem<string>(STORAGE_KEYS.ACCESS_TOKEN);\n  }\n\n  setAccessToken(token: string): void {\n    this.setItem(STORAGE_KEYS.ACCESS_TOKEN, token);\n  }\n\n  removeAccessToken(): void {\n    this.removeItem(STORAGE_KEYS.ACCESS_TOKEN);\n  }\n\n  getRefreshToken(): string | null {\n    return this.getItem<string>(STORAGE_KEYS.REFRESH_TOKEN);\n  }\n\n  setRefreshToken(token: string): void {\n    this.setItem(STORAGE_KEYS.REFRESH_TOKEN, token);\n  }\n\n  removeRefreshToken(): void {\n    this.removeItem(STORAGE_KEYS.REFRESH_TOKEN);\n  }\n\n  // User methods\n  getUser<T = any>(fallback?: T): T | null {\n    return this.getItem<T>(STORAGE_KEYS.USER, fallback);\n  }\n\n  setUser<T>(user: T): void {\n    this.setItem(STORAGE_KEYS.USER, user);\n  }\n\n  removeUser(): void {\n    this.removeItem(STORAGE_KEYS.USER);\n  }\n\n  // Theme methods\n  getTheme(): string | null {\n    return this.getItem<string>(STORAGE_KEYS.THEME);\n  }\n\n  setTheme(theme: string): void {\n    this.setItem(STORAGE_KEYS.THEME, theme);\n  }\n\n  // Sidebar methods\n  isSidebarCollapsed(): boolean {\n    return this.getItem<boolean>(STORAGE_KEYS.SIDEBAR_COLLAPSED, false) ?? false;\n  }\n\n  setSidebarCollapsed(collapsed: boolean): void {\n    this.setItem(STORAGE_KEYS.SIDEBAR_COLLAPSED, collapsed);\n  }\n\n  // Language methods\n  getLanguage(): string | null {\n    return this.getItem<string>(STORAGE_KEYS.LANGUAGE);\n  }\n\n  setLanguage(language: string): void {\n    this.setItem(STORAGE_KEYS.LANGUAGE, language);\n  }\n\n  /**\n   * Clear all auth-related storage\n   */\n  clearAuth(): void {\n    this.removeAccessToken();\n    this.removeRefreshToken();\n    this.removeUser();\n  }\n}\n\nexport const storage = new StorageService();\n","import { DEBOUNCE_DELAY, THROTTLE_DELAY } from './constants';\n\n/**\n * Debounce function - delays execution until after X milliseconds of inactivity\n */\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  delay: number = DEBOUNCE_DELAY\n): (...args: Parameters<T>) => void {\n  let timeoutId: ReturnType<typeof setTimeout>;\n\n  return function (...args: Parameters<T>) {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => func(...args), delay);\n  };\n}\n\n/**\n * Throttle function - executes at most once every X milliseconds\n */\nexport function throttle<T extends (...args: any[]) => any>(\n  func: T,\n  delay: number = THROTTLE_DELAY\n): (...args: Parameters<T>) => void {\n  let lastCall = 0;\n  let timeoutId: ReturnType<typeof setTimeout>;\n\n  return function (...args: Parameters<T>) {\n    const now = Date.now();\n    const timeSinceLastCall = now - lastCall;\n\n    if (timeSinceLastCall >= delay) {\n      func(...args);\n      lastCall = now;\n    } else {\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(() => {\n        func(...args);\n        lastCall = Date.now();\n      }, delay - timeSinceLastCall);\n    }\n  };\n}\n\n/**\n * Format date to readable string\n */\nexport function formatDate(date: Date | string, format: string = 'MM/dd/yyyy'): string {\n  const d = typeof date === 'string' ? new Date(date) : date;\n\n  if (isNaN(d.getTime())) return '';\n\n  const year = d.getFullYear();\n  const month = String(d.getMonth() + 1).padStart(2, '0');\n  const day = String(d.getDate()).padStart(2, '0');\n  const hours = String(d.getHours()).padStart(2, '0');\n  const minutes = String(d.getMinutes()).padStart(2, '0');\n  const seconds = String(d.getSeconds()).padStart(2, '0');\n\n  const replacements: Record<string, string> = {\n    yyyy: String(year),\n    MM: month,\n    dd: day,\n    HH: hours,\n    mm: minutes,\n    ss: seconds,\n  };\n\n  let result = format;\n  Object.entries(replacements).forEach(([pattern, value]) => {\n    result = result.replace(pattern, value);\n  });\n\n  return result;\n}\n\n/**\n * Format currency\n */\nexport function formatCurrency(amount: number, currency: string = 'USD'): string {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency,\n  }).format(amount);\n}\n\n/**\n * Format number with commas\n */\nexport function formatNumber(num: number, decimals: number = 2): string {\n  return num.toLocaleString('en-US', {\n    minimumFractionDigits: decimals,\n    maximumFractionDigits: decimals,\n  });\n}\n\n/**\n * Capitalize first letter of string\n */\nexport function capitalize(str: string): string {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n/**\n * Convert snake_case to Title Case\n */\nexport function snakeToTitle(str: string): string {\n  return str\n    .split('_')\n    .map((word) => capitalize(word.toLowerCase()))\n    .join(' ');\n}\n\n/**\n * Generate unique ID\n */\nexport function generateId(): string {\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n}\n\n/**\n * Safely parse JSON\n */\nexport function safeJsonParse<T>(json: string, fallback: T): T {\n  try {\n    return JSON.parse(json);\n  } catch {\n    return fallback;\n  }\n}\n\n/**\n * Check if user has required role\n */\nexport function hasRole(userRoles: string[], requiredRoles: string[]): boolean {\n  return requiredRoles.some((role) => userRoles.includes(role));\n}\n\n/**\n * Check if user has required permission\n */\nexport function hasPermission(userPermissions: string[], requiredPermissions: string[]): boolean {\n  return requiredPermissions.some((permission) => userPermissions.includes(permission));\n}\n\n/**\n * Get query params from URL\n */\nexport function getQueryParams(): Record<string, string> {\n  const params = new URLSearchParams(window.location.search);\n  const result: Record<string, string> = {};\n\n  params.forEach((value, key) => {\n    result[key] = value;\n  });\n\n  return result;\n}\n\n/**\n * Build query string from object\n */\nexport function buildQueryString(params: Record<string, any>): string {\n  const query = new URLSearchParams();\n\n  Object.entries(params).forEach(([key, value]) => {\n    if (value !== null && value !== undefined && value !== '') {\n      query.append(key, String(value));\n    }\n  });\n\n  return query.toString();\n}\n\n/**\n * Deep clone object\n */\nexport function deepClone<T>(obj: T): T {\n  return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n * Merge objects (shallow)\n */\nexport function mergeObjects<T extends Record<string, any>>(\n  target: T,\n  ...sources: Partial<T>[]\n): T {\n  return Object.assign({}, target, ...sources);\n}\n\n/**\n * Wait for X milliseconds\n */\nexport function delay(ms: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n/**\n * Retry async function with exponential backoff\n */\nexport async function retryAsync<T>(\n  fn: () => Promise<T>,\n  maxAttempts: number = 3,\n  delayMs: number = 1000\n): Promise<T> {\n  let lastError: Error | null = null;\n\n  for (let attempt = 1; attempt <= maxAttempts; attempt++) {\n    try {\n      return await fn();\n    } catch (error) {\n      lastError = error as Error;\n      if (attempt < maxAttempts) {\n        await delay(delayMs * attempt); // Exponential backoff\n      }\n    }\n  }\n\n  throw lastError;\n}\n\n/**\n * Truncate text with ellipsis\n */\nexport function truncateText(text: string, maxLength: number): string {\n  if (text.length <= maxLength) return text;\n  return text.substring(0, maxLength - 3) + '...';\n}\n\n/**\n * Check if device is mobile\n */\nexport function isMobile(): boolean {\n  return window.innerWidth < 768; // md breakpoint\n}\n\n/**\n * Check if device is tablet\n */\nexport function isTablet(): boolean {\n  return window.innerWidth >= 768 && window.innerWidth < 1024; // md to lg\n}\n\n/**\n * Get current breakpoint\n */\nexport function getCurrentBreakpoint(): 'sm' | 'md' | 'lg' | 'xl' | '2xl' {\n  const width = window.innerWidth;\n\n  if (width < 640) return 'sm';\n  if (width < 768) return 'md';\n  if (width < 1024) return 'lg';\n  if (width < 1280) return 'xl';\n  return '2xl';\n}\n\n/**\n * Validate email\n */\nexport function isValidEmail(email: string): boolean {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n}\n\n/**\n * Validate password strength\n */\nexport function isStrongPassword(password: string): boolean {\n  const strongPasswordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$/;\n  return strongPasswordRegex.test(password);\n}\n\n/**\n * Get password strength\n */\nexport function getPasswordStrength(password: string): 'weak' | 'medium' | 'strong' {\n  if (password.length < 6) return 'weak';\n  if (password.length < 8) return 'medium';\n  if (isStrongPassword(password)) return 'strong';\n  return 'medium';\n}\n","import { API_BASE_URL, API_TIMEOUT, HTTP_STATUS } from '@/utils/constants';\nimport { ApiResponse, ApiError, ApiRequestError, HttpClientConfig, RequestConfig } from '@/types/api.types';\nimport { storage } from './storage';\nimport { retryAsync } from '@/utils/helpers';\n\n/**\n * HTTP Client for API requests with token management\n */\nclass HttpClient {\n  private baseURL: string;\n  private timeout: number;\n  private defaultHeaders: Record<string, string>;\n\n  constructor(config?: HttpClientConfig) {\n    this.baseURL = config?.baseURL || API_BASE_URL;\n    this.timeout = config?.timeout || API_TIMEOUT;\n    this.defaultHeaders = {\n      'Content-Type': 'application/json',\n      ...config?.headers,\n    };\n  }\n\n  /**\n   * Get full URL for endpoint\n   */\n  private getUrl(endpoint: string): string {\n    if (endpoint.startsWith('http')) return endpoint;\n    return `${this.baseURL}${endpoint.startsWith('/') ? endpoint : `/${endpoint}`}`;\n  }\n\n  /**\n   * Get headers with authentication token\n   */\n  private getHeaders(config?: RequestConfig): Record<string, string> {\n    const headers = { ...this.defaultHeaders, ...config?.headers };\n    const accessToken = storage.getAccessToken();\n\n    if (accessToken) {\n      headers['Authorization'] = `Bearer ${accessToken}`;\n    }\n\n    return headers;\n  }\n\n  /**\n   * Handle response\n   */\n  private async handleResponse<T>(response: Response): Promise<T> {\n    const contentType = response.headers.get('content-type');\n    let data: any;\n\n    if (contentType?.includes('application/json')) {\n      data = await response.json();\n    } else {\n      data = await response.text();\n    }\n\n    if (!response.ok) {\n      throw new ApiRequestError(\n        response.status,\n        data,\n        data?.message || data || 'Request failed'\n      );\n    }\n\n    return data as T;\n  }\n\n  /**\n   * Handle errors\n   */\n  private handleError(error: unknown): ApiError {\n    if (error instanceof ApiRequestError) {\n      // Handle 401 Unauthorized - Token might be expired\n      if (error.statusCode === HTTP_STATUS.UNAUTHORIZED) {\n        storage.clearAuth();\n        window.location.href = '/login';\n      }\n\n      return {\n        message: error.message,\n        statusCode: error.statusCode,\n        details: error.data,\n      };\n    }\n\n    if (error instanceof TypeError) {\n      return {\n        message: 'Network error. Please check your connection.',\n        statusCode: 0,\n      };\n    }\n\n    return {\n      message: 'An unknown error occurred',\n      statusCode: 500,\n    };\n  }\n\n  /**\n   * Make GET request\n   */\n  async get<T = any>(endpoint: string, config?: RequestConfig): Promise<T> {\n    const url = this.getUrl(endpoint);\n    const headers = this.getHeaders(config);\n    const queryString = config?.params ? this.buildQueryString(config.params) : '';\n    const fullUrl = queryString ? `${url}?${queryString}` : url;\n\n    const fetchOptions: RequestInit = {\n      method: 'GET',\n      headers,\n      signal: AbortSignal.timeout(this.timeout),\n    };\n\n    const response = await fetch(fullUrl, fetchOptions);\n    return this.handleResponse<T>(response);\n  }\n\n  /**\n   * Make POST request\n   */\n  async post<T = any>(endpoint: string, data?: any, config?: RequestConfig): Promise<T> {\n    const url = this.getUrl(endpoint);\n    const headers = this.getHeaders(config);\n\n    const fetchOptions: RequestInit = {\n      method: 'POST',\n      headers,\n      body: data ? JSON.stringify(data) : undefined,\n      signal: AbortSignal.timeout(this.timeout),\n    };\n\n    const response = await fetch(url, fetchOptions);\n    return this.handleResponse<T>(response);\n  }\n\n  /**\n   * Make PUT request\n   */\n  async put<T = any>(endpoint: string, data?: any, config?: RequestConfig): Promise<T> {\n    const url = this.getUrl(endpoint);\n    const headers = this.getHeaders(config);\n\n    const fetchOptions: RequestInit = {\n      method: 'PUT',\n      headers,\n      body: data ? JSON.stringify(data) : undefined,\n      signal: AbortSignal.timeout(this.timeout),\n    };\n\n    const response = await fetch(url, fetchOptions);\n    return this.handleResponse<T>(response);\n  }\n\n  /**\n   * Make PATCH request\n   */\n  async patch<T = any>(endpoint: string, data?: any, config?: RequestConfig): Promise<T> {\n    const url = this.getUrl(endpoint);\n    const headers = this.getHeaders(config);\n\n    const fetchOptions: RequestInit = {\n      method: 'PATCH',\n      headers,\n      body: data ? JSON.stringify(data) : undefined,\n      signal: AbortSignal.timeout(this.timeout),\n    };\n\n    const response = await fetch(url, fetchOptions);\n    return this.handleResponse<T>(response);\n  }\n\n  /**\n   * Make DELETE request\n   */\n  async delete<T = any>(endpoint: string, config?: RequestConfig): Promise<T> {\n    const url = this.getUrl(endpoint);\n    const headers = this.getHeaders(config);\n\n    const fetchOptions: RequestInit = {\n      method: 'DELETE',\n      headers,\n      signal: AbortSignal.timeout(this.timeout),\n    };\n\n    const response = await fetch(url, fetchOptions);\n    return this.handleResponse<T>(response);\n  }\n\n  /**\n   * Build query string from params\n   */\n  private buildQueryString(params: Record<string, any>): string {\n    const query = new URLSearchParams();\n\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== null && value !== undefined && value !== '') {\n        if (Array.isArray(value)) {\n          value.forEach((v) => query.append(key, String(v)));\n        } else {\n          query.append(key, String(value));\n        }\n      }\n    });\n\n    return query.toString();\n  }\n\n  /**\n   * Set default headers\n   */\n  setDefaultHeaders(headers: Record<string, string>): void {\n    this.defaultHeaders = { ...this.defaultHeaders, ...headers };\n  }\n\n  /**\n   * Update base URL\n   */\n  setBaseURL(baseURL: string): void {\n    this.baseURL = baseURL;\n  }\n}\n\n// Create singleton instance\nexport const apiClient = new HttpClient();\n\n/**\n * API service - Wrapper around HTTP client with retry logic and error handling\n */\nexport class ApiService {\n  constructor(private http: HttpClient = apiClient) {}\n\n  /**\n   * Fetch with retry\n   */\n  private async fetchWithRetry<T>(\n    fn: () => Promise<T>,\n    config?: RequestConfig\n  ): Promise<T> {\n    const shouldRetry = config?.retry !== false;\n    const retryCount = config?.retryCount ?? 3;\n\n    if (!shouldRetry) {\n      return fn();\n    }\n\n    try {\n      return await retryAsync(fn, retryCount, 1000);\n    } catch (error) {\n      throw this.http['handleError'](error);\n    }\n  }\n\n  /**\n   * GET request\n   */\n  async get<T = any>(endpoint: string, config?: RequestConfig): Promise<ApiResponse<T>> {\n    return this.fetchWithRetry(() => this.http.get<ApiResponse<T>>(endpoint, config), config);\n  }\n\n  /**\n   * POST request\n   */\n  async post<T = any>(\n    endpoint: string,\n    data?: any,\n    config?: RequestConfig\n  ): Promise<ApiResponse<T>> {\n    return this.fetchWithRetry(() => this.http.post<ApiResponse<T>>(endpoint, data, config), config);\n  }\n\n  /**\n   * PUT request\n   */\n  async put<T = any>(\n    endpoint: string,\n    data?: any,\n    config?: RequestConfig\n  ): Promise<ApiResponse<T>> {\n    return this.fetchWithRetry(() => this.http.put<ApiResponse<T>>(endpoint, data, config), config);\n  }\n\n  /**\n   * PATCH request\n   */\n  async patch<T = any>(\n    endpoint: string,\n    data?: any,\n    config?: RequestConfig\n  ): Promise<ApiResponse<T>> {\n    return this.fetchWithRetry(() => this.http.patch<ApiResponse<T>>(endpoint, data, config), config);\n  }\n\n  /**\n   * DELETE request\n   */\n  async delete<T = any>(endpoint: string, config?: RequestConfig): Promise<ApiResponse<T>> {\n    return this.fetchWithRetry(() => this.http.delete<ApiResponse<T>>(endpoint, config), config);\n  }\n}\n\nexport const api = new ApiService();\n","import {\n  LoginRequest,\n  LoginResponse,\n  RegisterRequest,\n  RefreshTokenRequest,\n  RefreshTokenResponse,\n} from '@/types/auth.types';\nimport { api } from './api';\nimport { storage } from './storage';\n\n/**\n * Authentication Service\n */\nexport class AuthService {\n  private tokenRefreshTimeout: ReturnType<typeof setTimeout> | null = null;\n\n  /**\n   * Login with email and password\n   */\n  async login(email: string, password: string): Promise<LoginResponse> {\n    const request: LoginRequest = { email, password };\n\n    const response = await api.post<LoginResponse>('/auth/login', request, {\n      retry: false,\n    });\n\n    if (response.data) {\n      this.setTokens(response.data.accessToken, response.data.refreshToken);\n      storage.setUser(response.data.user);\n    }\n\n    return response.data;\n  }\n\n  /**\n   * Register new user\n   */\n  async register(\n    email: string,\n    password: string,\n    name: string,\n    companyName?: string\n  ): Promise<LoginResponse> {\n    const request: RegisterRequest = {\n      email,\n      password,\n      confirmPassword: password,\n      name,\n      companyName,\n    };\n\n    const response = await api.post<LoginResponse>('/auth/register', request, {\n      retry: false,\n    });\n\n    if (response.data) {\n      this.setTokens(response.data.accessToken, response.data.refreshToken);\n      storage.setUser(response.data.user);\n    }\n\n    return response.data;\n  }\n\n  /**\n   * Refresh access token\n   */\n  async refreshToken(): Promise<RefreshTokenResponse> {\n    const refreshToken = storage.getRefreshToken();\n\n    if (!refreshToken) {\n      throw new Error('No refresh token available');\n    }\n\n    const request: RefreshTokenRequest = { refreshToken };\n\n    const response = await api.post<RefreshTokenResponse>('/auth/refresh-token', request, {\n      retry: false,\n    });\n\n    if (response.data) {\n      this.setTokens(response.data.accessToken, response.data.refreshToken);\n    }\n\n    return response.data;\n  }\n\n  /**\n   * Logout user\n   */\n  async logout(): Promise<void> {\n    this.clearTokenRefreshTimeout();\n\n    try {\n      await api.post('/auth/logout', {}, { retry: false });\n    } catch (error) {\n      console.error('Logout API call failed:', error);\n    }\n\n    storage.clearAuth();\n  }\n\n  /**\n   * Request password reset\n   */\n  async requestPasswordReset(email: string): Promise<void> {\n    await api.post('/auth/forgot-password', { email }, { retry: false });\n  }\n\n  /**\n   * Reset password with token\n   */\n  async resetPassword(token: string, password: string): Promise<void> {\n    await api.post(\n      '/auth/reset-password',\n      { token, password, confirmPassword: password },\n      { retry: false }\n    );\n  }\n\n  /**\n   * Verify email\n   */\n  async verifyEmail(token: string): Promise<void> {\n    await api.post('/auth/verify-email', { token }, { retry: false });\n  }\n\n  /**\n   * Get current user\n   */\n  async getCurrentUser() {\n    const response = await api.get('/auth/me', { retry: false });\n    if (response.data) {\n      storage.setUser(response.data);\n    }\n    return response.data;\n  }\n\n  /**\n   * Check if user is authenticated\n   */\n  isAuthenticated(): boolean {\n    return !!storage.getAccessToken();\n  }\n\n  /**\n   * Get access token\n   */\n  getAccessToken(): string | null {\n    return storage.getAccessToken();\n  }\n\n  /**\n   * Get refresh token\n   */\n  getRefreshToken(): string | null {\n    return storage.getRefreshToken();\n  }\n\n  /**\n   * Set tokens and schedule refresh\n   */\n  private setTokens(accessToken: string, refreshToken: string): void {\n    storage.setAccessToken(accessToken);\n    storage.setRefreshToken(refreshToken);\n    this.scheduleTokenRefresh(accessToken);\n  }\n\n  /**\n   * Schedule token refresh before expiry\n   */\n  private scheduleTokenRefresh(token: string): void {\n    this.clearTokenRefreshTimeout();\n\n    try {\n      const decoded = this.decodeToken(token);\n      if (!decoded || !decoded.exp) return;\n\n      const expiryTime = decoded.exp * 1000; // Convert to ms\n      const currentTime = Date.now();\n      const timeUntilRefresh = expiryTime - currentTime - 5 * 60 * 1000; // Refresh 5 minutes before expiry\n\n      if (timeUntilRefresh > 0) {\n        this.tokenRefreshTimeout = setTimeout(() => {\n          this.refreshToken().catch((error) => {\n            console.error('Token refresh failed:', error);\n            storage.clearAuth();\n            window.location.href = '/login';\n          });\n        }, timeUntilRefresh);\n      }\n    } catch (error) {\n      console.error('Failed to schedule token refresh:', error);\n    }\n  }\n\n  /**\n   * Decode JWT token (basic decoding, doesn't verify signature)\n   */\n  private decodeToken(token: string): Record<string, any> | null {\n    try {\n      const parts = token.split('.');\n      if (parts.length !== 3) return null;\n\n      const decoded = JSON.parse(atob(parts[1]));\n      return decoded;\n    } catch {\n      return null;\n    }\n  }\n\n  /**\n   * Clear token refresh timeout\n   */\n  private clearTokenRefreshTimeout(): void {\n    if (this.tokenRefreshTimeout) {\n      clearTimeout(this.tokenRefreshTimeout);\n      this.tokenRefreshTimeout = null;\n    }\n  }\n\n  /**\n   * Check if token is expired\n   */\n  isTokenExpired(): boolean {\n    const token = storage.getAccessToken();\n    if (!token) return true;\n\n    const decoded = this.decodeToken(token);\n    if (!decoded || !decoded.exp) return true;\n\n    return decoded.exp * 1000 < Date.now();\n  }\n}\n\nexport const authService = new AuthService();\n","import { create } from 'zustand';\nimport { User, UserRole } from '@/types/auth.types';\nimport { authService } from '@/services/auth.service';\nimport { storage } from '@/services/storage';\n\ninterface AuthStore {\n  // State\n  user: User | null;\n  isAuthenticated: boolean;\n  loading: boolean;\n  error: string | null;\n\n  // Actions\n  login: (email: string, password: string) => Promise<void>;\n  register: (email: string, password: string, name: string, companyName?: string) => Promise<void>;\n  logout: () => Promise<void>;\n  refreshToken: () => Promise<void>;\n  setUser: (user: User | null) => void;\n  setError: (error: string | null) => void;\n  clearError: () => void;\n\n  // Helpers\n  hasRole: (role: UserRole | UserRole[]) => boolean;\n  hasPermission: (permission: string) => boolean;\n  initializeAuth: () => void;\n}\n\nexport const useAuthStore = create<AuthStore>((set, get) => ({\n  // Initial state\n  user: storage.getUser<User>() || null,\n  isAuthenticated: !!storage.getAccessToken(),\n  loading: false,\n  error: null,\n\n  // Login action\n  login: async (email: string, password: string) => {\n    set({ loading: true, error: null });\n    try {\n      const response = await authService.login(email, password);\n      set({\n        user: response.user,\n        isAuthenticated: true,\n        loading: false,\n      });\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Login failed';\n      set({\n        error: message,\n        loading: false,\n      });\n      throw error;\n    }\n  },\n\n  // Register action\n  register: async (email: string, password: string, name: string, companyName?: string) => {\n    set({ loading: true, error: null });\n    try {\n      const response = await authService.register(email, password, name, companyName);\n      set({\n        user: response.user,\n        isAuthenticated: true,\n        loading: false,\n      });\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Registration failed';\n      set({\n        error: message,\n        loading: false,\n      });\n      throw error;\n    }\n  },\n\n  // Logout action\n  logout: async () => {\n    set({ loading: true, error: null });\n    try {\n      await authService.logout();\n      set({\n        user: null,\n        isAuthenticated: false,\n        loading: false,\n      });\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Logout failed';\n      set({\n        error: message,\n        loading: false,\n      });\n    }\n  },\n\n  // Refresh token action\n  refreshToken: async () => {\n    try {\n      await authService.refreshToken();\n      const user = storage.getUser<User>();\n      set({ user });\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Token refresh failed';\n      set({\n        error: message,\n        isAuthenticated: false,\n        user: null,\n      });\n      storage.clearAuth();\n    }\n  },\n\n  // Set user\n  setUser: (user: User | null) => {\n    if (user) {\n      storage.setUser(user);\n    } else {\n      storage.removeUser();\n    }\n    set({ user });\n  },\n\n  // Set error\n  setError: (error: string | null) => set({ error }),\n\n  // Clear error\n  clearError: () => set({ error: null }),\n\n  // Check if user has role\n  hasRole: (roles: UserRole | UserRole[]) => {\n    const { user } = get();\n    if (!user) return false;\n\n    const rolesArray = Array.isArray(roles) ? roles : [roles];\n    return user.roles.some((role) => rolesArray.includes(role.name as UserRole));\n  },\n\n  // Check if user has permission\n  hasPermission: (permission: string) => {\n    const { user } = get();\n    if (!user) return false;\n\n    return user.roles.some((role) =>\n      role.permissions.some((p) => p.name === permission || p.slug === permission)\n    );\n  },\n\n  // Initialize auth from storage\n  initializeAuth: () => {\n    const storedUser = storage.getUser<User>();\n    const accessToken = storage.getAccessToken();\n\n    if (storedUser && accessToken) {\n      set({\n        user: storedUser,\n        isAuthenticated: true,\n      });\n    } else {\n      storage.clearAuth();\n      set({\n        user: null,\n        isAuthenticated: false,\n      });\n    }\n  },\n}));\n","import React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuthStore } from '@/store/authStore';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\n/**\n * ProtectedRoute - Redirects to login if not authenticated\n */\nexport function ProtectedRoute({ children }: ProtectedRouteProps): React.ReactElement {\n  const { isAuthenticated, loading } = useAuthStore();\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  return <>{children}</>;\n}\n","import React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuthStore } from '@/store/authStore';\nimport { UserRole } from '@/types/auth.types';\n\ninterface RoleBasedRouteProps {\n  children: React.ReactNode;\n  requiredRoles: UserRole[];\n  fallback?: React.ReactNode;\n}\n\n/**\n * RoleBasedRoute - Checks user roles and returns 403 if insufficient\n */\nexport function RoleBasedRoute({\n  children,\n  requiredRoles,\n  fallback,\n}: RoleBasedRouteProps): React.ReactElement {\n  const { user, loading } = useAuthStore();\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  const hasRequiredRole = user.roles.some((role) =>\n    requiredRoles.includes(role.name as UserRole)\n  );\n\n  if (!hasRequiredRole) {\n    return fallback ? <>{fallback}</> : <Navigate to=\"/unauthorized\" replace />;\n  }\n\n  return <>{children}</>;\n}\n","export enum UserRole {\n  ADMIN = 'admin',\n  MANAGER = 'manager',\n  CASHIER = 'cashier',\n}\n\nexport interface PermissionData {\n  id: string;\n  name: string;\n  slug: string;\n  description?: string;\n}\n\nexport interface Role {\n  id: string;\n  name: UserRole;\n  displayName: string;\n  permissions: PermissionData[];\n  description?: string;\n}\n\nexport interface User {\n  id: string;\n  email: string;\n  name: string;\n  roles: Role[];\n  companyId: string;\n  isActive: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface LoginRequest {\n  email: string;\n  password: string;\n}\n\nexport interface LoginResponse {\n  accessToken: string;\n  refreshToken: string;\n  user: User;\n}\n\nexport interface RegisterRequest {\n  email: string;\n  password: string;\n  confirmPassword: string;\n  name: string;\n  companyName?: string;\n}\n\nexport interface RefreshTokenRequest {\n  refreshToken: string;\n}\n\nexport interface RefreshTokenResponse {\n  accessToken: string;\n  refreshToken: string;\n}\n\nexport interface AuthError {\n  message: string;\n  statusCode: number;\n  details?: Record<string, any>;\n}\n","import { create } from 'zustand';\nimport { storage } from '@/services/storage';\n\nexport type Theme = 'light' | 'dark' | 'system';\n\ninterface UIStore {\n  // Sidebar\n  sidebarCollapsed: boolean;\n  setSidebarCollapsed: (collapsed: boolean) => void;\n\n  // Theme\n  theme: Theme;\n  setTheme: (theme: Theme) => void;\n\n  // Mobile Menu\n  mobileMenuOpen: boolean;\n  setMobileMenuOpen: (open: boolean) => void;\n\n  // Toast\n  toastMessage: { message: string; type: 'success' | 'error' | 'warning' | 'info' } | null;\n  showToast: (message: string, type: 'success' | 'error' | 'warning' | 'info') => void;\n  clearToast: () => void;\n\n  // Dialog\n  dialogs: Record<string, boolean>;\n  openDialog: (dialogId: string) => void;\n  closeDialog: (dialogId: string) => void;\n  toggleDialog: (dialogId: string) => void;\n\n  // Breadcrumbs\n  breadcrumbs: Array<{ label: string; path?: string }>;\n  setBreadcrumbs: (breadcrumbs: Array<{ label: string; path?: string }>) => void;\n\n  // Initialize from storage\n  initialize: () => void;\n}\n\nexport const useUIStore = create<UIStore>((set) => ({\n  // Sidebar\n  sidebarCollapsed: false,\n  setSidebarCollapsed: (collapsed: boolean) => {\n    storage.setSidebarCollapsed(collapsed);\n    set({ sidebarCollapsed: collapsed });\n  },\n\n  // Theme\n  theme: 'light',\n  setTheme: (theme: Theme) => {\n    storage.setTheme(theme);\n    set({ theme });\n\n    // Apply theme to DOM\n    if (theme === 'dark') {\n      document.documentElement.classList.add('dark');\n    } else if (theme === 'light') {\n      document.documentElement.classList.remove('dark');\n    } else {\n      // System theme\n      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n      if (prefersDark) {\n        document.documentElement.classList.add('dark');\n      } else {\n        document.documentElement.classList.remove('dark');\n      }\n    }\n  },\n\n  // Mobile Menu\n  mobileMenuOpen: false,\n  setMobileMenuOpen: (open: boolean) => set({ mobileMenuOpen: open }),\n\n  // Toast\n  toastMessage: null,\n  showToast: (message: string, type: 'success' | 'error' | 'warning' | 'info') => {\n    set({ toastMessage: { message, type } });\n\n    // Auto-clear after delay\n    setTimeout(() => {\n      set({ toastMessage: null });\n    }, 4000);\n  },\n  clearToast: () => set({ toastMessage: null }),\n\n  // Dialog\n  dialogs: {},\n  openDialog: (dialogId: string) =>\n    set((state) => ({\n      dialogs: { ...state.dialogs, [dialogId]: true },\n    })),\n  closeDialog: (dialogId: string) =>\n    set((state) => ({\n      dialogs: { ...state.dialogs, [dialogId]: false },\n    })),\n  toggleDialog: (dialogId: string) =>\n    set((state) => ({\n      dialogs: { ...state.dialogs, [dialogId]: !state.dialogs[dialogId] },\n    })),\n\n  // Breadcrumbs\n  breadcrumbs: [],\n  setBreadcrumbs: (breadcrumbs: Array<{ label: string; path?: string }>) =>\n    set({ breadcrumbs }),\n\n  // Initialize from storage\n  initialize: () => {\n    const sidebarCollapsed = storage.isSidebarCollapsed();\n    const theme = (storage.getTheme() || 'light') as Theme;\n\n    set({ sidebarCollapsed, theme });\n\n    // Apply theme to DOM\n    if (theme === 'dark') {\n      document.documentElement.classList.add('dark');\n    }\n  },\n}));\n","import { useCallback } from 'react';\nimport { useAuthStore } from '@/store/authStore';\nimport { UserRole } from '@/types/auth.types';\n\n/**\n * Hook to access auth state and actions\n */\nexport function useAuth() {\n  const state = useAuthStore();\n\n  const login = useCallback(\n    (email: string, password: string) => state.login(email, password),\n    [state]\n  );\n\n  const register = useCallback(\n    (email: string, password: string, name: string, companyName?: string) =>\n      state.register(email, password, name, companyName),\n    [state]\n  );\n\n  const logout = useCallback(() => state.logout(), [state]);\n\n  const refreshToken = useCallback(() => state.refreshToken(), [state]);\n\n  const hasRole = useCallback(\n    (role: UserRole | UserRole[]) => state.hasRole(role),\n    [state]\n  );\n\n  const hasPermission = useCallback(\n    (permission: string) => state.hasPermission(permission),\n    [state]\n  );\n\n  return {\n    // State\n    user: state.user,\n    isAuthenticated: state.isAuthenticated,\n    loading: state.loading,\n    error: state.error,\n\n    // Actions\n    login,\n    register,\n    logout,\n    refreshToken,\n    setUser: state.setUser,\n    setError: state.setError,\n    clearError: state.clearError,\n\n    // Helpers\n    hasRole,\n    hasPermission,\n    initializeAuth: state.initializeAuth,\n  };\n}\n","import React from 'react';\nimport { Menu, LogOut, Settings, User, ChevronDown } from 'lucide-react';\nimport { useUIStore } from '@/store/uiStore';\nimport { useAuthStore } from '@/store/authStore';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '@/hooks/useAuth';\n\ninterface HeaderProps {\n  isAdmin?: boolean;\n}\n\n/**\n * Header Component - Top navigation bar with user profile and controls\n */\nexport function Header({ isAdmin = false }: HeaderProps): React.ReactElement {\n  const { setMobileMenuOpen, mobileMenuOpen } = useUIStore();\n  const { user, isAuthenticated } = useAuthStore();\n  const { logout } = useAuth();\n  const navigate = useNavigate();\n  const [showUserMenu, setShowUserMenu] = React.useState(false);\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      navigate('/login');\n    } catch (error) {\n      console.error('Logout failed:', error);\n    }\n  };\n\n  return (\n    <header className=\"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-30\">\n      <div className=\"px-4 md:px-6 py-4 flex items-center justify-between\">\n        {/* Left Side - Menu Toggle */}\n        <div className=\"flex items-center gap-4\">\n          <button\n            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n            className=\"md:hidden p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n            aria-label=\"Toggle menu\"\n          >\n            <Menu className=\"w-6 h-6 text-gray-700 dark:text-gray-300\" />\n          </button>\n          {isAdmin && (\n            <span className=\"text-sm font-semibold text-red-600 dark:text-red-400 hidden md:inline\">\n              ADMIN\n            </span>\n          )}\n        </div>\n\n        {/* Right Side - User Menu */}\n        <div className=\"flex items-center gap-4\">\n          {/* Settings Button */}\n          <button\n            onClick={() => navigate('/admin/settings')}\n            className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors hidden md:inline-flex\"\n            aria-label=\"Settings\"\n            title=\"Settings\"\n          >\n            <Settings className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n          </button>\n\n          {/* User Profile Dropdown */}\n          {isAuthenticated && user && (\n            <div className=\"relative\">\n              <button\n                onClick={() => setShowUserMenu(!showUserMenu)}\n                className=\"flex items-center gap-2 px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n              >\n                <div className=\"w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center\">\n                  <span className=\"text-white text-sm font-semibold\">\n                    {user.name.charAt(0).toUpperCase()}\n                  </span>\n                </div>\n                <div className=\"hidden sm:block text-left\">\n                  <p className=\"text-sm font-medium text-gray-900 dark:text-white\">{user.name}</p>\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                    {user.roles[0]?.name || 'User'}\n                  </p>\n                </div>\n                <ChevronDown className=\"w-4 h-4 text-gray-600 dark:text-gray-400\" />\n              </button>\n\n              {/* Dropdown Menu */}\n              {showUserMenu && (\n                <div className=\"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg\">\n                  <div className=\"p-4 border-b border-gray-200 dark:border-gray-700\">\n                    <p className=\"text-sm font-medium text-gray-900 dark:text-white\">{user.name}</p>\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">{user.email}</p>\n                  </div>\n                  <div className=\"p-2\">\n                    <button\n                      onClick={() => {\n                        navigate('/admin/settings');\n                        setShowUserMenu(false);\n                      }}\n                      className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded\"\n                    >\n                      <Settings className=\"w-4 h-4\" />\n                      Settings\n                    </button>\n                    <button\n                      onClick={() => {\n                        navigate('/admin/profile');\n                        setShowUserMenu(false);\n                      }}\n                      className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded\"\n                    >\n                      <User className=\"w-4 h-4\" />\n                      Profile\n                    </button>\n                    <button\n                      onClick={() => {\n                        handleLogout();\n                        setShowUserMenu(false);\n                      }}\n                      className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded\"\n                    >\n                      <LogOut className=\"w-4 h-4\" />\n                      Logout\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </header>\n  );\n}\n","import React from 'react';\nimport {\n  BarChart3,\n  ShoppingCart,\n  Package,\n  Users,\n  Settings,\n  LogOut,\n  ChevronLeft,\n  ChevronRight,\n  Home,\n  FileText,\n} from 'lucide-react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { useUIStore } from '@/store/uiStore';\nimport { useAuthStore } from '@/store/authStore';\nimport { useAuth } from '@/hooks/useAuth';\nimport { NavigationItem } from '@/types/common.types';\nimport { UserRole } from '@/types/auth.types';\n\ninterface SidebarProps {\n  isAdmin?: boolean;\n}\n\n/**\n * Sidebar Component - Navigation menu with role-based items\n */\nexport function Sidebar({ isAdmin = false }: SidebarProps): React.ReactElement {\n  const { sidebarCollapsed, setSidebarCollapsed } = useUIStore();\n  const { user } = useAuthStore();\n  const { logout } = useAuth();\n  const location = useLocation();\n\n  // Define navigation items based on roles\n  const getNavItems = (): NavigationItem[] => {\n    const baseItems: NavigationItem[] = [\n      {\n        id: 'dashboard',\n        label: 'Dashboard',\n        path: '/dashboard',\n        icon: 'BarChart3',\n      },\n    ];\n\n    if (!user) return baseItems;\n\n    const userRoles = user.roles.map((r) => r.name);\n    const allItems: NavigationItem[] = [...baseItems];\n\n    // Add role-based items\n    if (userRoles.includes(UserRole.CASHIER)) {\n      allItems.push(\n        {\n          id: 'sales',\n          label: 'Sales',\n          path: '/dashboard/sales',\n          icon: 'ShoppingCart',\n        },\n        {\n          id: 'customers',\n          label: 'Customers',\n          path: '/dashboard/customers',\n          icon: 'Users',\n        }\n      );\n    }\n\n    if (userRoles.includes(UserRole.MANAGER)) {\n      allItems.push(\n        {\n          id: 'sales',\n          label: 'Sales',\n          path: '/dashboard/sales',\n          icon: 'ShoppingCart',\n        },\n        {\n          id: 'products',\n          label: 'Products',\n          path: '/dashboard/products',\n          icon: 'Package',\n        },\n        {\n          id: 'customers',\n          label: 'Customers',\n          path: '/dashboard/customers',\n          icon: 'Users',\n        },\n        {\n          id: 'reports',\n          label: 'Reports',\n          path: '/dashboard/reports',\n          icon: 'FileText',\n        }\n      );\n    }\n\n    if (userRoles.includes(UserRole.ADMIN) && isAdmin) {\n      allItems.push(\n        {\n          id: 'admin-settings',\n          label: 'Settings',\n          path: '/admin/settings',\n          icon: 'Settings',\n        },\n        {\n          id: 'users',\n          label: 'Users',\n          path: '/admin/users',\n          icon: 'Users',\n        },\n        {\n          id: 'audit-log',\n          label: 'Audit Log',\n          path: '/admin/audit-log',\n          icon: 'FileText',\n        }\n      );\n    }\n\n    return allItems;\n  };\n\n  const navItems = getNavItems();\n  const iconMap: Record<string, React.ReactNode> = {\n    BarChart3: <BarChart3 className=\"w-5 h-5\" />,\n    ShoppingCart: <ShoppingCart className=\"w-5 h-5\" />,\n    Package: <Package className=\"w-5 h-5\" />,\n    Users: <Users className=\"w-5 h-5\" />,\n    Settings: <Settings className=\"w-5 h-5\" />,\n    FileText: <FileText className=\"w-5 h-5\" />,\n    Home: <Home className=\"w-5 h-5\" />,\n  };\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n    } catch (error) {\n      console.error('Logout failed:', error);\n    }\n  };\n\n  const isActive = (path: string): boolean => {\n    return location.pathname === path || location.pathname.startsWith(path + '/');\n  };\n\n  return (\n    <aside\n      className={`${\n        sidebarCollapsed ? 'w-20' : 'w-64'\n      } bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col transition-all duration-300 fixed md:relative h-screen z-20 md:z-auto`}\n    >\n      {/* Logo / Brand */}\n      <div className=\"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between\">\n        {!sidebarCollapsed && <span className=\"text-lg font-bold text-blue-600\">POS</span>}\n        <button\n          onClick={() => setSidebarCollapsed(!sidebarCollapsed)}\n          className=\"hidden md:p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors\"\n          aria-label=\"Toggle sidebar\"\n        >\n          {sidebarCollapsed ? (\n            <ChevronRight className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n          ) : (\n            <ChevronLeft className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\n          )}\n        </button>\n      </div>\n\n      {/* Navigation Items */}\n      <nav className=\"flex-1 overflow-y-auto py-4 px-2 space-y-2\">\n        {navItems.map((item) => (\n          <Link\n            key={item.id}\n            to={item.path}\n            className={`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${\n              isActive(item.path)\n                ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium'\n                : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\n            }`}\n            title={sidebarCollapsed ? item.label : undefined}\n          >\n            <span className=\"flex-shrink-0\">\n              {iconMap[item.icon || 'Home'] || <Home className=\"w-5 h-5\" />}\n            </span>\n            {!sidebarCollapsed && <span className=\"flex-1\">{item.label}</span>}\n          </Link>\n        ))}\n      </nav>\n\n      {/* Logout Button */}\n      <div className=\"p-2 border-t border-gray-200 dark:border-gray-700\">\n        <button\n          onClick={handleLogout}\n          className=\"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors\"\n          title={sidebarCollapsed ? 'Logout' : undefined}\n        >\n          <LogOut className=\"w-5 h-5 flex-shrink-0\" />\n          {!sidebarCollapsed && <span>Logout</span>}\n        </button>\n      </div>\n    </aside>\n  );\n}\n","import React from 'react';\nimport { APP_NAME, APP_VERSION } from '@/utils/constants';\n\n/**\n * Footer Component - Bottom footer with info and links\n */\nexport function Footer(): React.ReactElement {\n  const currentYear = new Date().getFullYear();\n\n  return (\n    <footer className=\"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700\">\n      <div className=\"px-4 md:px-6 py-4\">\n        <div className=\"flex flex-col md:flex-row items-center justify-between gap-4\">\n          {/* Copyright */}\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n             {currentYear} {APP_NAME}. All rights reserved.\n          </p>\n\n          {/* Version */}\n          <p className=\"text-sm text-gray-500 dark:text-gray-500\">\n            Version {APP_VERSION}\n          </p>\n\n          {/* Links */}\n          <div className=\"flex gap-4 text-sm\">\n            <a\n              href=\"#\"\n              className=\"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors\"\n            >\n              Privacy\n            </a>\n            <span className=\"text-gray-300 dark:text-gray-600\"></span>\n            <a\n              href=\"#\"\n              className=\"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors\"\n            >\n              Terms\n            </a>\n            <span className=\"text-gray-300 dark:text-gray-600\"></span>\n            <a\n              href=\"#\"\n              className=\"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors\"\n            >\n              Support\n            </a>\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { Outlet } from 'react-router-dom';\nimport { Header } from '@/components/common/Header';\nimport { Sidebar } from '@/components/common/Sidebar';\nimport { Footer } from '@/components/common/Footer';\nimport { useUIStore } from '@/store/uiStore';\nimport { isMobile } from '@/utils/helpers';\n\n/**\n * MainLayout - Dashboard area layout with header, sidebar, and main content\n */\nexport function MainLayout(): React.ReactElement {\n  const { mobileMenuOpen, setMobileMenuOpen } = useUIStore();\n  const [isMobileDevice, setIsMobileDevice] = React.useState(false);\n\n  useEffect(() => {\n    // Check if device is mobile on mount and on resize\n    const checkMobile = () => setIsMobileDevice(isMobile());\n    checkMobile();\n\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  // Close mobile menu when navigating\n  useEffect(() => {\n    if (mobileMenuOpen && isMobileDevice) {\n      setMobileMenuOpen(false);\n    }\n  }, []);\n\n  return (\n    <div className=\"flex h-screen flex-col md:flex-row bg-gray-50 dark:bg-gray-900\">\n      {/* Sidebar */}\n      <Sidebar />\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex flex-col min-w-0\">\n        {/* Header */}\n        <Header />\n\n        {/* Page Content */}\n        <main className=\"flex-1 overflow-y-auto\">\n          <div className=\"container mx-auto p-4 md:p-6\">\n            <Outlet />\n          </div>\n        </main>\n\n        {/* Footer */}\n        <Footer />\n      </div>\n\n      {/* Mobile Menu Overlay */}\n      {isMobileDevice && mobileMenuOpen && (\n        <div\n          className=\"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden\"\n          onClick={() => setMobileMenuOpen(false)}\n        />\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport { Outlet, Link } from 'react-router-dom';\nimport { APP_NAME } from '@/utils/constants';\n\n/**\n * AuthLayout - Layout for authentication pages (login, register, etc.)\n */\nexport function AuthLayout(): React.ReactElement {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex flex-col\">\n      {/* Header with Logo */}\n      <div className=\"p-4 md:p-6\">\n        <Link to=\"/\" className=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">\n          {APP_NAME}\n        </Link>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex items-center justify-center px-4\">\n        <div className=\"w-full max-w-md\">\n          <Outlet />\n        </div>\n      </div>\n\n      {/* Footer */}\n      <footer className=\"p-4 md:p-6 text-center text-sm text-gray-600 dark:text-gray-400\">\n        <div className=\"space-y-2\">\n          <p> {new Date().getFullYear()} {APP_NAME}. All rights reserved.</p>\n          <div className=\"space-x-4\">\n            <a href=\"#\" className=\"hover:text-gray-800 dark:hover:text-gray-200\">\n              Privacy Policy\n            </a>\n            <a href=\"#\" className=\"hover:text-gray-800 dark:hover:text-gray-200\">\n              Terms of Service\n            </a>\n            <a href=\"#\" className=\"hover:text-gray-800 dark:hover:text-gray-200\">\n              Contact Support\n            </a>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n","import React, { useEffect } from 'react';\nimport { Outlet } from 'react-router-dom';\nimport { Header } from '@/components/common/Header';\nimport { Sidebar } from '@/components/common/Sidebar';\nimport { Footer } from '@/components/common/Footer';\nimport { useUIStore } from '@/store/uiStore';\nimport { isMobile } from '@/utils/helpers';\n\n/**\n * AdminLayout - Layout for admin features with enhanced header and sidebar\n */\nexport function AdminLayout(): React.ReactElement {\n  const { mobileMenuOpen, setMobileMenuOpen } = useUIStore();\n  const [isMobileDevice, setIsMobileDevice] = React.useState(false);\n\n  useEffect(() => {\n    // Check if device is mobile on mount and on resize\n    const checkMobile = () => setIsMobileDevice(isMobile());\n    checkMobile();\n\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  // Close mobile menu when navigating\n  useEffect(() => {\n    if (mobileMenuOpen && isMobileDevice) {\n      setMobileMenuOpen(false);\n    }\n  }, []);\n\n  return (\n    <div className=\"flex h-screen flex-col md:flex-row bg-gray-50 dark:bg-gray-900\">\n      {/* Sidebar */}\n      <Sidebar isAdmin={true} />\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex flex-col min-w-0\">\n        {/* Header */}\n        <Header isAdmin={true} />\n\n        {/* Page Content */}\n        <main className=\"flex-1 overflow-y-auto\">\n          <div className=\"container mx-auto p-4 md:p-6\">\n            {/* Admin Notice */}\n            <div className=\"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg\">\n              <p className=\"text-sm text-yellow-800 dark:text-yellow-200\">\n                <span className=\"font-semibold\">Admin Mode:</span> You have full access to all features.\n              </p>\n            </div>\n\n            <Outlet />\n          </div>\n        </main>\n\n        {/* Footer */}\n        <Footer />\n      </div>\n\n      {/* Mobile Menu Overlay */}\n      {isMobileDevice && mobileMenuOpen && (\n        <div\n          className=\"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden\"\n          onClick={() => setMobileMenuOpen(false)}\n        />\n      )}\n    </div>\n  );\n}\n","import { Suspense, lazy } from 'react';\nimport { RouteObject } from 'react-router-dom';\nimport { ProtectedRoute } from './ProtectedRoute';\nimport { RoleBasedRoute } from './RoleBasedRoute';\nimport { UserRole } from '@/types/auth.types';\n\n// Layout Components\nimport { MainLayout } from '@/components/layouts/MainLayout';\nimport { AuthLayout } from '@/components/layouts/AuthLayout';\nimport { AdminLayout } from '@/components/layouts/AdminLayout';\n\n// Page Components (lazy loaded)\nconst LoginPage = lazy(() => import('@/pages/auth/LoginPage'));\nconst RegisterPage = lazy(() => import('@/pages/auth/RegisterPage'));\nconst ForgotPasswordPage = lazy(() => import('@/pages/auth/ForgotPasswordPage'));\nconst DashboardPage = lazy(() => import('@/pages/dashboard/DashboardPage'));\nconst NotFoundPage = lazy(() => import('@/pages/NotFoundPage'));\nconst UnauthorizedPage = lazy(() => import('@/pages/UnauthorizedPage'));\n\n// Lazy Loading Component\nconst LoadingFallback = () => (\n  <div className=\"flex items-center justify-center min-h-screen\">\n    <div className=\"text-center\">\n      <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"></div>\n      <p className=\"text-gray-600\">Loading...</p>\n    </div>\n  </div>\n);\n\nexport const routes: RouteObject[] = [\n  // Public Routes\n  {\n    path: '/login',\n    element: <AuthLayout />,\n    children: [\n      {\n        path: '',\n        element: (\n          <Suspense fallback={<LoadingFallback />}>\n            <LoginPage />\n          </Suspense>\n        ),\n      },\n    ],\n  },\n  {\n    path: '/register',\n    element: <AuthLayout />,\n    children: [\n      {\n        path: '',\n        element: (\n          <Suspense fallback={<LoadingFallback />}>\n            <RegisterPage />\n          </Suspense>\n        ),\n      },\n    ],\n  },\n  {\n    path: '/forgot-password',\n    element: <AuthLayout />,\n    children: [\n      {\n        path: '',\n        element: (\n          <Suspense fallback={<LoadingFallback />}>\n            <ForgotPasswordPage />\n          </Suspense>\n        ),\n      },\n    ],\n  },\n\n  // Protected Routes\n  {\n    path: '/dashboard',\n    element: (\n      <ProtectedRoute>\n        <MainLayout />\n      </ProtectedRoute>\n    ),\n    children: [\n      {\n        path: '',\n        element: (\n          <Suspense fallback={<LoadingFallback />}>\n            <DashboardPage />\n          </Suspense>\n        ),\n      },\n    ],\n  },\n\n  // Admin Routes\n  {\n    path: '/admin',\n    element: (\n      <ProtectedRoute>\n        <RoleBasedRoute requiredRoles={[UserRole.ADMIN]}>\n          <AdminLayout />\n        </RoleBasedRoute>\n      </ProtectedRoute>\n    ),\n    children: [\n      {\n        path: '',\n        element: (\n          <Suspense fallback={<LoadingFallback />}>\n            <DashboardPage />\n          </Suspense>\n        ),\n      },\n    ],\n  },\n\n  // Error Routes\n  {\n    path: '/unauthorized',\n    element: (\n      <Suspense fallback={<LoadingFallback />}>\n        <UnauthorizedPage />\n      </Suspense>\n    ),\n  },\n  {\n    path: '/404',\n    element: (\n      <Suspense fallback={<LoadingFallback />}>\n        <NotFoundPage />\n      </Suspense>\n    ),\n  },\n\n  // Catch-all route\n  {\n    path: '*',\n    element: (\n      <Suspense fallback={<LoadingFallback />}>\n        <NotFoundPage />\n      </Suspense>\n    ),\n  },\n];\n","import React, { useEffect } from 'react';\nimport { RouterProvider, createBrowserRouter } from 'react-router-dom';\nimport { routes } from '@/routes';\nimport { useAuthStore } from '@/store/authStore';\nimport { useUIStore } from '@/store/uiStore';\n\n/**\n * Root App Component\n */\nfunction App(): React.ReactElement {\n  const router = createBrowserRouter(routes);\n  const { initializeAuth } = useAuthStore();\n  const { initialize: initializeUI } = useUIStore();\n\n  // Initialize auth and UI on mount\n  useEffect(() => {\n    initializeAuth();\n    initializeUI();\n  }, [initializeAuth, initializeUI]);\n\n  return <RouterProvider router={router} />;\n}\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport App from './App'\nimport './index.css'\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n)"],"file":"assets/index-b6b9d503.js"}