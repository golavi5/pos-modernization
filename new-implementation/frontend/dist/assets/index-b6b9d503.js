var e=Object.defineProperty,t=(t,r,s)=>(((t,r,s)=>{r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s})(t,"symbol"!=typeof r?r+"":r,s),s);import{r,b as s,g as a,c as n}from"./react-vendor-aaec8410.js";import{N as o,u as i,a as l,L as c,O as d,c as h,R as u}from"./router-vendor-3df7ae82.js";import{M as m,S as g,C as x,U as f,L as p,a as y,b,H as j,B as k,c as v,P as w,d as N,F as S}from"./ui-vendor-b5c4755c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var T={exports:{}},E={},A=r,R=Symbol.for("react.element"),_=Symbol.for("react.fragment"),P=Object.prototype.hasOwnProperty,I=A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C={key:!0,ref:!0,__self:!0,__source:!0};function L(e,t,r){var s,a={},n=null,o=null;for(s in void 0!==r&&(n=""+r),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(o=t.ref),t)P.call(t,s)&&!C.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:R,type:e,key:n,ref:o,props:a,_owner:I.current}}E.Fragment=_,E.jsx=L,E.jsxs=L,T.exports=E;var O=T.exports,U={},M=s;U.createRoot=M.createRoot,U.hydrateRoot=M.hydrateRoot;const D={},z=function(e,t,r){if(!t||0===t.length)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(e=>{if((e=function(e){return"/"+e}(e))in D)return;D[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(!!r)for(let r=s.length-1;r>=0;r--){const a=s[r];if(a.href===e&&(!t||"stylesheet"===a.rel))return}else if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise((t,r)=>{n.addEventListener("load",t),n.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0})).then(()=>e()).catch(e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e})},H=e=>{let t;const r=new Set,s=(e,s)=>{const a="function"==typeof e?e(t):e;if(!Object.is(a,t)){const e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,n={setState:s,getState:a,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{r.clear()}},o=t=e(s,a,n);return n};var V={exports:{}},F={},W={exports:{}},$={},B=r;var q="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},J=B.useState,Y=B.useEffect,G=B.useLayoutEffect,K=B.useDebugValue;function Q(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!q(e,r)}catch(s){return!0}}var X="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),s=J({inst:{value:r,getSnapshot:t}}),a=s[0].inst,n=s[1];return G(function(){a.value=r,a.getSnapshot=t,Q(a)&&n({inst:a})},[e,r,t]),Y(function(){return Q(a)&&n({inst:a}),e(function(){Q(a)&&n({inst:a})})},[e]),K(r),r};$.useSyncExternalStore=void 0!==B.useSyncExternalStore?B.useSyncExternalStore:X,W.exports=$;var Z=W.exports,ee=r,te=Z;
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var re="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},se=te.useSyncExternalStore,ae=ee.useRef,ne=ee.useEffect,oe=ee.useMemo,ie=ee.useDebugValue;F.useSyncExternalStoreWithSelector=function(e,t,r,s,a){var n=ae(null);if(null===n.current){var o={hasValue:!1,value:null};n.current=o}else o=n.current;n=oe(function(){function e(e){if(!l){if(l=!0,n=e,e=s(e),void 0!==a&&o.hasValue){var t=o.value;if(a(t,e))return i=t}return i=e}if(t=i,re(n,e))return t;var r=s(e);return void 0!==a&&a(t,r)?(n=e,t):(n=e,i=r)}var n,i,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,s,a]);var i=se(e,n[0],n[1]);return ne(function(){o.hasValue=!0,o.value=i},[i]),ie(i),i},V.exports=F;const le=a(V.exports),{useDebugValue:ce}=n,{useSyncExternalStoreWithSelector:de}=le;const he=e=>e;const ue=e=>{const t="function"==typeof e?(e=>e?H(e):H)(e):e,r=(e,r)=>function(e,t=he,r){const s=de(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return ce(s),s}(t,e,r);return Object.assign(r,t),r},me=e=>e?ue(e):ue,ge={}.VITE_API_BASE_URL||"http://localhost:3000/api",xe=parseInt({}.VITE_API_TIMEOUT||"30000",10),fe={}.VITE_APP_NAME||"POS System",pe={}.VITE_APP_VERSION||"1.0.0",ye="access_token",be="refresh_token",je="user",ke="theme",ve="sidebar_collapsed",we="language",Ne=401;class Se extends Error{constructor(e,t,r){super(r||`API Error: ${e}`),this.statusCode=e,this.data=t,this.name="ApiRequestError"}}const Te=new class{getItem(e,t){try{const r=localStorage.getItem(e);return null===r?t??null:JSON.parse(r)}catch{return t??null}}setItem(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.error(`Failed to set item ${e}:`,r)}}removeItem(e){try{localStorage.removeItem(e)}catch(t){console.error(`Failed to remove item ${e}:`,t)}}clear(){try{localStorage.clear()}catch(e){console.error("Failed to clear storage:",e)}}hasItem(e){return null!==localStorage.getItem(e)}getAllKeys(){const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);r&&e.push(r)}return e}getAccessToken(){return this.getItem(ye)}setAccessToken(e){this.setItem(ye,e)}removeAccessToken(){this.removeItem(ye)}getRefreshToken(){return this.getItem(be)}setRefreshToken(e){this.setItem(be,e)}removeRefreshToken(){this.removeItem(be)}getUser(e){return this.getItem(je,e)}setUser(e){this.setItem(je,e)}removeUser(){this.removeItem(je)}getTheme(){return this.getItem(ke)}setTheme(e){this.setItem(ke,e)}isSidebarCollapsed(){return this.getItem(ve,!1)??!1}setSidebarCollapsed(e){this.setItem(ve,e)}getLanguage(){return this.getItem(we)}setLanguage(e){this.setItem(we,e)}clearAuth(){this.removeAccessToken(),this.removeRefreshToken(),this.removeUser()}};function Ee(e){return new Promise(t=>setTimeout(t,e))}function Ae(){return window.innerWidth<768}const Re=new class{constructor(e){t(this,"baseURL"),t(this,"timeout"),t(this,"defaultHeaders"),this.baseURL=(null==e?void 0:e.baseURL)||ge,this.timeout=(null==e?void 0:e.timeout)||xe,this.defaultHeaders={"Content-Type":"application/json",...null==e?void 0:e.headers}}getUrl(e){return e.startsWith("http")?e:`${this.baseURL}${e.startsWith("/")?e:`/${e}`}`}getHeaders(e){const t={...this.defaultHeaders,...null==e?void 0:e.headers},r=Te.getAccessToken();return r&&(t.Authorization=`Bearer ${r}`),t}async handleResponse(e){const t=e.headers.get("content-type");let r;if(r=(null==t?void 0:t.includes("application/json"))?await e.json():await e.text(),!e.ok)throw new Se(e.status,r,(null==r?void 0:r.message)||r||"Request failed");return r}handleError(e){return e instanceof Se?(e.statusCode===Ne&&(Te.clearAuth(),window.location.href="/login"),{message:e.message,statusCode:e.statusCode,details:e.data}):e instanceof TypeError?{message:"Network error. Please check your connection.",statusCode:0}:{message:"An unknown error occurred",statusCode:500}}async get(e,t){const r=this.getUrl(e),s=this.getHeaders(t),a=(null==t?void 0:t.params)?this.buildQueryString(t.params):"",n=a?`${r}?${a}`:r,o={method:"GET",headers:s,signal:AbortSignal.timeout(this.timeout)},i=await fetch(n,o);return this.handleResponse(i)}async post(e,t,r){const s=this.getUrl(e),a={method:"POST",headers:this.getHeaders(r),body:t?JSON.stringify(t):void 0,signal:AbortSignal.timeout(this.timeout)},n=await fetch(s,a);return this.handleResponse(n)}async put(e,t,r){const s=this.getUrl(e),a={method:"PUT",headers:this.getHeaders(r),body:t?JSON.stringify(t):void 0,signal:AbortSignal.timeout(this.timeout)},n=await fetch(s,a);return this.handleResponse(n)}async patch(e,t,r){const s=this.getUrl(e),a={method:"PATCH",headers:this.getHeaders(r),body:t?JSON.stringify(t):void 0,signal:AbortSignal.timeout(this.timeout)},n=await fetch(s,a);return this.handleResponse(n)}async delete(e,t){const r=this.getUrl(e),s={method:"DELETE",headers:this.getHeaders(t),signal:AbortSignal.timeout(this.timeout)},a=await fetch(r,s);return this.handleResponse(a)}buildQueryString(e){const t=new URLSearchParams;return Object.entries(e).forEach(([e,r])=>{null!=r&&""!==r&&(Array.isArray(r)?r.forEach(r=>t.append(e,String(r))):t.append(e,String(r)))}),t.toString()}setDefaultHeaders(e){this.defaultHeaders={...this.defaultHeaders,...e}}setBaseURL(e){this.baseURL=e}};const _e=new class{constructor(e=Re){this.http=e}async fetchWithRetry(e,t){const r=!1!==(null==t?void 0:t.retry),s=(null==t?void 0:t.retryCount)??3;if(!r)return e();try{return await async function(e,t=3,r=1e3){let s=null;for(let n=1;n<=t;n++)try{return await e()}catch(a){s=a,n<t&&await Ee(r*n)}throw s}(e,s,1e3)}catch(a){throw this.http.handleError(a)}}async get(e,t){return this.fetchWithRetry(()=>this.http.get(e,t),t)}async post(e,t,r){return this.fetchWithRetry(()=>this.http.post(e,t,r),r)}async put(e,t,r){return this.fetchWithRetry(()=>this.http.put(e,t,r),r)}async patch(e,t,r){return this.fetchWithRetry(()=>this.http.patch(e,t,r),r)}async delete(e,t){return this.fetchWithRetry(()=>this.http.delete(e,t),t)}};const Pe=new class{constructor(){t(this,"tokenRefreshTimeout",null)}async login(e,t){const r={email:e,password:t},s=await _e.post("/auth/login",r,{retry:!1});return s.data&&(this.setTokens(s.data.accessToken,s.data.refreshToken),Te.setUser(s.data.user)),s.data}async register(e,t,r,s){const a={email:e,password:t,confirmPassword:t,name:r,companyName:s},n=await _e.post("/auth/register",a,{retry:!1});return n.data&&(this.setTokens(n.data.accessToken,n.data.refreshToken),Te.setUser(n.data.user)),n.data}async refreshToken(){const e=Te.getRefreshToken();if(!e)throw new Error("No refresh token available");const t={refreshToken:e},r=await _e.post("/auth/refresh-token",t,{retry:!1});return r.data&&this.setTokens(r.data.accessToken,r.data.refreshToken),r.data}async logout(){this.clearTokenRefreshTimeout();try{await _e.post("/auth/logout",{},{retry:!1})}catch(e){console.error("Logout API call failed:",e)}Te.clearAuth()}async requestPasswordReset(e){await _e.post("/auth/forgot-password",{email:e},{retry:!1})}async resetPassword(e,t){await _e.post("/auth/reset-password",{token:e,password:t,confirmPassword:t},{retry:!1})}async verifyEmail(e){await _e.post("/auth/verify-email",{token:e},{retry:!1})}async getCurrentUser(){const e=await _e.get("/auth/me",{retry:!1});return e.data&&Te.setUser(e.data),e.data}isAuthenticated(){return!!Te.getAccessToken()}getAccessToken(){return Te.getAccessToken()}getRefreshToken(){return Te.getRefreshToken()}setTokens(e,t){Te.setAccessToken(e),Te.setRefreshToken(t),this.scheduleTokenRefresh(e)}scheduleTokenRefresh(e){this.clearTokenRefreshTimeout();try{const t=this.decodeToken(e);if(!t||!t.exp)return;const r=1e3*t.exp,s=r-Date.now()-3e5;s>0&&(this.tokenRefreshTimeout=setTimeout(()=>{this.refreshToken().catch(e=>{console.error("Token refresh failed:",e),Te.clearAuth(),window.location.href="/login"})},s))}catch(t){console.error("Failed to schedule token refresh:",t)}}decodeToken(e){try{const t=e.split(".");if(3!==t.length)return null;return JSON.parse(atob(t[1]))}catch{return null}}clearTokenRefreshTimeout(){this.tokenRefreshTimeout&&(clearTimeout(this.tokenRefreshTimeout),this.tokenRefreshTimeout=null)}isTokenExpired(){const e=Te.getAccessToken();if(!e)return!0;const t=this.decodeToken(e);return!t||!t.exp||1e3*t.exp<Date.now()}},Ie=me((e,t)=>({user:Te.getUser()||null,isAuthenticated:!!Te.getAccessToken(),loading:!1,error:null,login:async(t,r)=>{e({loading:!0,error:null});try{const s=await Pe.login(t,r);e({user:s.user,isAuthenticated:!0,loading:!1})}catch(s){const t=s instanceof Error?s.message:"Login failed";throw e({error:t,loading:!1}),s}},register:async(t,r,s,a)=>{e({loading:!0,error:null});try{const n=await Pe.register(t,r,s,a);e({user:n.user,isAuthenticated:!0,loading:!1})}catch(n){const t=n instanceof Error?n.message:"Registration failed";throw e({error:t,loading:!1}),n}},logout:async()=>{e({loading:!0,error:null});try{await Pe.logout(),e({user:null,isAuthenticated:!1,loading:!1})}catch(t){const r=t instanceof Error?t.message:"Logout failed";e({error:r,loading:!1})}},refreshToken:async()=>{try{await Pe.refreshToken();const t=Te.getUser();e({user:t})}catch(t){const r=t instanceof Error?t.message:"Token refresh failed";e({error:r,isAuthenticated:!1,user:null}),Te.clearAuth()}},setUser:t=>{t?Te.setUser(t):Te.removeUser(),e({user:t})},setError:t=>e({error:t}),clearError:()=>e({error:null}),hasRole:e=>{const{user:r}=t();if(!r)return!1;const s=Array.isArray(e)?e:[e];return r.roles.some(e=>s.includes(e.name))},hasPermission:e=>{const{user:r}=t();return!!r&&r.roles.some(t=>t.permissions.some(t=>t.name===e||t.slug===e))},initializeAuth:()=>{const t=Te.getUser(),r=Te.getAccessToken();t&&r?e({user:t,isAuthenticated:!0}):(Te.clearAuth(),e({user:null,isAuthenticated:!1}))}}));function Ce({children:e}){const{isAuthenticated:t,loading:r}=Ie();return r?O.jsx("div",{className:"flex items-center justify-center min-h-screen",children:O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),O.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):t?O.jsx(O.Fragment,{children:e}):O.jsx(o,{to:"/login",replace:!0})}function Le({children:e,requiredRoles:t,fallback:r}){const{user:s,loading:a}=Ie();if(a)return O.jsx("div",{className:"flex items-center justify-center min-h-screen",children:O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),O.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(!s)return O.jsx(o,{to:"/login",replace:!0});return s.roles.some(e=>t.includes(e.name))?O.jsx(O.Fragment,{children:e}):r?O.jsx(O.Fragment,{children:r}):O.jsx(o,{to:"/unauthorized",replace:!0})}var Oe=(e=>(e.ADMIN="admin",e.MANAGER="manager",e.CASHIER="cashier",e))(Oe||{});const Ue=me(e=>({sidebarCollapsed:!1,setSidebarCollapsed:t=>{Te.setSidebarCollapsed(t),e({sidebarCollapsed:t})},theme:"light",setTheme:t=>{if(Te.setTheme(t),e({theme:t}),"dark"===t)document.documentElement.classList.add("dark");else if("light"===t)document.documentElement.classList.remove("dark");else{window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}},mobileMenuOpen:!1,setMobileMenuOpen:t=>e({mobileMenuOpen:t}),toastMessage:null,showToast:(t,r)=>{e({toastMessage:{message:t,type:r}}),setTimeout(()=>{e({toastMessage:null})},4e3)},clearToast:()=>e({toastMessage:null}),dialogs:{},openDialog:t=>e(e=>({dialogs:{...e.dialogs,[t]:!0}})),closeDialog:t=>e(e=>({dialogs:{...e.dialogs,[t]:!1}})),toggleDialog:t=>e(e=>({dialogs:{...e.dialogs,[t]:!e.dialogs[t]}})),breadcrumbs:[],setBreadcrumbs:t=>e({breadcrumbs:t}),initialize:()=>{const t=Te.isSidebarCollapsed(),r=Te.getTheme()||"light";e({sidebarCollapsed:t,theme:r}),"dark"===r&&document.documentElement.classList.add("dark")}}));function Me(){const e=Ie(),t=r.useCallback((t,r)=>e.login(t,r),[e]),s=r.useCallback((t,r,s,a)=>e.register(t,r,s,a),[e]),a=r.useCallback(()=>e.logout(),[e]),n=r.useCallback(()=>e.refreshToken(),[e]),o=r.useCallback(t=>e.hasRole(t),[e]),i=r.useCallback(t=>e.hasPermission(t),[e]);return{user:e.user,isAuthenticated:e.isAuthenticated,loading:e.loading,error:e.error,login:t,register:s,logout:a,refreshToken:n,setUser:e.setUser,setError:e.setError,clearError:e.clearError,hasRole:o,hasPermission:i,initializeAuth:e.initializeAuth}}function De({isAdmin:e=!1}){var t;const{setMobileMenuOpen:r,mobileMenuOpen:s}=Ue(),{user:a,isAuthenticated:o}=Ie(),{logout:l}=Me(),c=i(),[d,h]=n.useState(!1);return O.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-30",children:O.jsxs("div",{className:"px-4 md:px-6 py-4 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("button",{onClick:()=>r(!s),className:"md:hidden p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Toggle menu",children:O.jsx(m,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),e&&O.jsx("span",{className:"text-sm font-semibold text-red-600 dark:text-red-400 hidden md:inline",children:"ADMIN"})]}),O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("button",{onClick:()=>c("/admin/settings"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors hidden md:inline-flex","aria-label":"Settings",title:"Settings",children:O.jsx(g,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),o&&a&&O.jsxs("div",{className:"relative",children:[O.jsxs("button",{onClick:()=>h(!d),className:"flex items-center gap-2 px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[O.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center",children:O.jsx("span",{className:"text-white text-sm font-semibold",children:a.name.charAt(0).toUpperCase()})}),O.jsxs("div",{className:"hidden sm:block text-left",children:[O.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.name}),O.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(null==(t=a.roles[0])?void 0:t.name)||"User"})]}),O.jsx(x,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})]}),d&&O.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[O.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[O.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.name}),O.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.email})]}),O.jsxs("div",{className:"p-2",children:[O.jsxs("button",{onClick:()=>{c("/admin/settings"),h(!1)},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:[O.jsx(g,{className:"w-4 h-4"}),"Settings"]}),O.jsxs("button",{onClick:()=>{c("/admin/profile"),h(!1)},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:[O.jsx(f,{className:"w-4 h-4"}),"Profile"]}),O.jsxs("button",{onClick:()=>{(async()=>{try{await l(),c("/login")}catch(e){console.error("Logout failed:",e)}})(),h(!1)},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",children:[O.jsx(p,{className:"w-4 h-4"}),"Logout"]})]})]})]})]})]})})}function ze({isAdmin:e=!1}){const{sidebarCollapsed:t,setSidebarCollapsed:r}=Ue(),{user:s}=Ie(),{logout:a}=Me(),n=l(),o=(()=>{const t=[{id:"dashboard",label:"Dashboard",path:"/dashboard",icon:"BarChart3"}];if(!s)return t;const r=s.roles.map(e=>e.name),a=[...t];return r.includes(Oe.CASHIER)&&a.push({id:"sales",label:"Sales",path:"/dashboard/sales",icon:"ShoppingCart"},{id:"customers",label:"Customers",path:"/dashboard/customers",icon:"Users"}),r.includes(Oe.MANAGER)&&a.push({id:"sales",label:"Sales",path:"/dashboard/sales",icon:"ShoppingCart"},{id:"products",label:"Products",path:"/dashboard/products",icon:"Package"},{id:"customers",label:"Customers",path:"/dashboard/customers",icon:"Users"},{id:"reports",label:"Reports",path:"/dashboard/reports",icon:"FileText"}),r.includes(Oe.ADMIN)&&e&&a.push({id:"admin-settings",label:"Settings",path:"/admin/settings",icon:"Settings"},{id:"users",label:"Users",path:"/admin/users",icon:"Users"},{id:"audit-log",label:"Audit Log",path:"/admin/audit-log",icon:"FileText"}),a})(),i={BarChart3:O.jsx(k,{className:"w-5 h-5"}),ShoppingCart:O.jsx(v,{className:"w-5 h-5"}),Package:O.jsx(w,{className:"w-5 h-5"}),Users:O.jsx(N,{className:"w-5 h-5"}),Settings:O.jsx(g,{className:"w-5 h-5"}),FileText:O.jsx(S,{className:"w-5 h-5"}),Home:O.jsx(j,{className:"w-5 h-5"})};return O.jsxs("aside",{className:(t?"w-20":"w-64")+" bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col transition-all duration-300 fixed md:relative h-screen z-20 md:z-auto",children:[O.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[!t&&O.jsx("span",{className:"text-lg font-bold text-blue-600",children:"POS"}),O.jsx("button",{onClick:()=>r(!t),className:"hidden md:p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors","aria-label":"Toggle sidebar",children:t?O.jsx(y,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):O.jsx(b,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),O.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2 space-y-2",children:o.map(e=>{return O.jsxs(c,{to:e.path,className:"flex items-center gap-3 px-3 py-2 rounded-lg transition-colors "+(r=e.path,n.pathname===r||n.pathname.startsWith(r+"/")?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),title:t?e.label:void 0,children:[O.jsx("span",{className:"flex-shrink-0",children:i[e.icon||"Home"]||O.jsx(j,{className:"w-5 h-5"})}),!t&&O.jsx("span",{className:"flex-1",children:e.label})]},e.id);var r})}),O.jsx("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700",children:O.jsxs("button",{onClick:async()=>{try{await a()}catch(e){console.error("Logout failed:",e)}},className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:t?"Logout":void 0,children:[O.jsx(p,{className:"w-5 h-5 flex-shrink-0"}),!t&&O.jsx("span",{children:"Logout"})]})})]})}function He(){const e=(new Date).getFullYear();return O.jsx("footer",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:O.jsx("div",{className:"px-4 md:px-6 py-4",children:O.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[O.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["© ",e," ",fe,". All rights reserved."]}),O.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:["Version ",pe]}),O.jsxs("div",{className:"flex gap-4 text-sm",children:[O.jsx("a",{href:"#",className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Privacy"}),O.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"•"}),O.jsx("a",{href:"#",className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Terms"}),O.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"•"}),O.jsx("a",{href:"#",className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Support"})]})]})})})}function Ve(){const{mobileMenuOpen:e,setMobileMenuOpen:t}=Ue(),[s,a]=n.useState(!1);return r.useEffect(()=>{const e=()=>a(Ae());return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),r.useEffect(()=>{e&&s&&t(!1)},[]),O.jsxs("div",{className:"flex h-screen flex-col md:flex-row bg-gray-50 dark:bg-gray-900",children:[O.jsx(ze,{}),O.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[O.jsx(De,{}),O.jsx("main",{className:"flex-1 overflow-y-auto",children:O.jsx("div",{className:"container mx-auto p-4 md:p-6",children:O.jsx(d,{})})}),O.jsx(He,{})]}),s&&e&&O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>t(!1)})]})}function Fe(){return O.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex flex-col",children:[O.jsx("div",{className:"p-4 md:p-6",children:O.jsx(c,{to:"/",className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:fe})}),O.jsx("div",{className:"flex-1 flex items-center justify-center px-4",children:O.jsx("div",{className:"w-full max-w-md",children:O.jsx(d,{})})}),O.jsx("footer",{className:"p-4 md:p-6 text-center text-sm text-gray-600 dark:text-gray-400",children:O.jsxs("div",{className:"space-y-2",children:[O.jsxs("p",{children:["© ",(new Date).getFullYear()," ",fe,". All rights reserved."]}),O.jsxs("div",{className:"space-x-4",children:[O.jsx("a",{href:"#",className:"hover:text-gray-800 dark:hover:text-gray-200",children:"Privacy Policy"}),O.jsx("a",{href:"#",className:"hover:text-gray-800 dark:hover:text-gray-200",children:"Terms of Service"}),O.jsx("a",{href:"#",className:"hover:text-gray-800 dark:hover:text-gray-200",children:"Contact Support"})]})]})})]})}function We(){const{mobileMenuOpen:e,setMobileMenuOpen:t}=Ue(),[s,a]=n.useState(!1);return r.useEffect(()=>{const e=()=>a(Ae());return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),r.useEffect(()=>{e&&s&&t(!1)},[]),O.jsxs("div",{className:"flex h-screen flex-col md:flex-row bg-gray-50 dark:bg-gray-900",children:[O.jsx(ze,{isAdmin:!0}),O.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[O.jsx(De,{isAdmin:!0}),O.jsx("main",{className:"flex-1 overflow-y-auto",children:O.jsxs("div",{className:"container mx-auto p-4 md:p-6",children:[O.jsx("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg",children:O.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[O.jsx("span",{className:"font-semibold",children:"Admin Mode:"})," You have full access to all features."]})}),O.jsx(d,{})]})}),O.jsx(He,{})]}),s&&e&&O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>t(!1)})]})}const $e=r.lazy(()=>z(()=>import("./LoginPage-5251c628.js"),["assets/LoginPage-5251c628.js","assets/router-vendor-3df7ae82.js","assets/react-vendor-aaec8410.js","assets/validators-f5a2b25e.js","assets/ui-vendor-b5c4755c.js"])),Be=r.lazy(()=>z(()=>import("./RegisterPage-5f340e15.js"),["assets/RegisterPage-5f340e15.js","assets/router-vendor-3df7ae82.js","assets/react-vendor-aaec8410.js","assets/validators-f5a2b25e.js","assets/ui-vendor-b5c4755c.js"])),qe=r.lazy(()=>z(()=>import("./ForgotPasswordPage-b5d231a1.js"),["assets/ForgotPasswordPage-b5d231a1.js","assets/react-vendor-aaec8410.js","assets/router-vendor-3df7ae82.js","assets/validators-f5a2b25e.js","assets/ui-vendor-b5c4755c.js"])),Je=r.lazy(()=>z(()=>import("./DashboardPage-6c862097.js"),["assets/DashboardPage-6c862097.js","assets/ui-vendor-b5c4755c.js","assets/react-vendor-aaec8410.js","assets/router-vendor-3df7ae82.js"])),Ye=r.lazy(()=>z(()=>import("./NotFoundPage-c40eed8a.js"),["assets/NotFoundPage-c40eed8a.js","assets/router-vendor-3df7ae82.js","assets/react-vendor-aaec8410.js","assets/ui-vendor-b5c4755c.js"])),Ge=r.lazy(()=>z(()=>import("./UnauthorizedPage-1c705486.js"),["assets/UnauthorizedPage-1c705486.js","assets/router-vendor-3df7ae82.js","assets/react-vendor-aaec8410.js","assets/ui-vendor-b5c4755c.js"])),Ke=()=>O.jsx("div",{className:"flex items-center justify-center min-h-screen",children:O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),O.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}),Qe=[{path:"/login",element:O.jsx(Fe,{}),children:[{path:"",element:O.jsx(r.Suspense,{fallback:O.jsx(Ke,{}),children:O.jsx($e,{})})}]},{path:"/register",element:O.jsx(Fe,{}),children:[{path:"",element:O.jsx(r.Suspense,{fallback:O.jsx(Ke,{}),children:O.jsx(Be,{})})}]},{path:"/forgot-password",element:O.jsx(Fe,{}),children:[{path:"",element:O.jsx(r.Suspense,{fallback:O.jsx(Ke,{}),children:O.jsx(qe,{})})}]},{path:"/dashboard",element:O.jsx(Ce,{children:O.jsx(Ve,{})}),children:[{path:"",element:O.jsx(r.Suspense,{fallback:O.jsx(Ke,{}),children:O.jsx(Je,{})})}]},{path:"/admin",element:O.jsx(Ce,{children:O.jsx(Le,{requiredRoles:[Oe.ADMIN],children:O.jsx(We,{})})}),children:[{path:"",element:O.jsx(r.Suspense,{fallback:O.jsx(Ke,{}),children:O.jsx(Je,{})})}]},{path:"/unauthorized",element:O.jsx(r.Suspense,{fallback:O.jsx(Ke,{}),children:O.jsx(Ge,{})})},{path:"/404",element:O.jsx(r.Suspense,{fallback:O.jsx(Ke,{}),children:O.jsx(Ye,{})})},{path:"*",element:O.jsx(r.Suspense,{fallback:O.jsx(Ke,{}),children:O.jsx(Ye,{})})}];function Xe(){const e=h(Qe),{initializeAuth:t}=Ie(),{initialize:s}=Ue();return r.useEffect(()=>{t(),s()},[t,s]),O.jsx(u,{router:e})}U.createRoot(document.getElementById("root")).render(O.jsx(n.StrictMode,{children:O.jsx(Xe,{})}));export{Pe as a,Ie as b,O as j,Me as u};
//# sourceMappingURL=index-b6b9d503.js.map
